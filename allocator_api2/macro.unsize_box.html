<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Allows turning a `Box&#60;T: Sized, A&#62;` into a `Box&#60;U: ?Sized, A&#62;` where `T` can be unsizing-coerced into a `U`."><title>unsize_box in allocator_api2 - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-492a78a4a87dcc01.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="allocator_api2" data-themes="" data-resource-suffix="" data-rustdoc-version="1.82.0 (f6e511eec 2024-10-15)" data-channel="1.82.0" data-search-js="search-a99f1315e7cc5121.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../static.files/storage-118b08c4c78b968e.js"></script><script defer src="sidebar-items.js"></script><script defer src="../static.files/main-921df33f47b8780c.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-3b12f09e550e0385.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc macro"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../allocator_api2/index.html">allocator_<wbr>api2</a><span class="version">0.2.21</span></h2></div><div class="sidebar-elems"></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Macro <a href="index.html">allocator_api2</a>::<wbr><a class="macro" href="#">unsize_box</a><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><span class="out-of-band"><a class="src" href="../src/allocator_api2/stable/mod.rs.html#47-60">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><pre class="rust item-decl"><span class="macro">macro_rules!</span> unsize_box {
    ( <span class="macro-nonterminal">$boxed</span>:expr $(,)<span class="question-mark">? </span>) =&gt; { ... };
}</pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Allows turning a <a href="boxed/struct.Box.html" title="struct allocator_api2::boxed::Box"><code>Box&lt;T: Sized, A&gt;</code></a> into a <a href="boxed/struct.Box.html" title="struct allocator_api2::boxed::Box"><code>Box&lt;U: ?Sized, A&gt;</code></a> where <code>T</code> can be unsizing-coerced into a <code>U</code>.</p>
<p>This is the only way to create an <code>allocator_api2::boxed::Box</code> of an unsized type on stable.</p>
<p>With the standard library’s <code>alloc::boxed::Box</code>, this is done automatically using the unstable unsize traits, but this crate’s Box
can’t take advantage of that machinery on stable. So, we need to use type inference and the fact that you <em>can</em>
still coerce the inner pointer of a box to get the compiler to help us unsize it using this macro.</p>
<h2 id="example"><a class="doc-anchor" href="#example">§</a>Example</h2>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>allocator_api2::unsize_box;
<span class="kw">use </span>allocator_api2::boxed::Box;
<span class="kw">use </span>core::any::Any;

<span class="kw">let </span>sized_box: Box&lt;u64&gt; = Box::new(<span class="number">0</span>);
<span class="kw">let </span>unsized_box: Box&lt;<span class="kw">dyn </span>Any&gt; = <span class="macro">unsize_box!</span>(sized_box);</code></pre></div>
</div></details></section></div></main></body></html>