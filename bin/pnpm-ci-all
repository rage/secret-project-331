#!/bin/bash
set -euo pipefail
source "$(dirname "$0")/.common"

run_command pnpm exec concurrently \
  -n "cms,course-material,main-frontend,example-exercise,shared-module,quizzes,tmc,system-tests,shared-module-common" \
  -c "green.bold,red.bold,blue.bold,yellow.bold,purple.bold,magenta.bold,cyan.bold,gray.bold,white.bold" \
  "bash -c 'cd services/cms/ && pnpm install --frozen-lockfile $*'" \
  "bash -c 'cd services/course-material/ && pnpm install --frozen-lockfile $*'" \
  "bash -c 'cd services/main-frontend && pnpm install --frozen-lockfile $*'" \
  "bash -c 'cd services/example-exercise && pnpm install --frozen-lockfile $*'" \
  "bash -c 'cd shared-module && pnpm install --frozen-lockfile $*'" \
  "bash -c 'cd services/quizzes/ && pnpm install --frozen-lockfile $*'" \
  "bash -c 'cd services/tmc/ && pnpm install --frozen-lockfile $*'" \
  "bash -c 'cd system-tests && pnpm install --frozen-lockfile $*'"\
  "bash -c 'cd shared-module/packages/common && pnpm install --frozen-lockfile $*'"


echo "finished"
