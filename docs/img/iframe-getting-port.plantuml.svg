<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="645.8333px" preserveAspectRatio="none" style="width:542px;height:645px;background:#00000000;" version="1.1" viewBox="0 0 542 645" width="542.7083px" zoomAndPan="magnify"><defs><linearGradient id="gbdpxh1o6o2u0" x1="50%" x2="50%" y1="0%" y2="100%"><stop offset="0%" stop-color="#33B2E2"/><stop offset="100%" stop-color="#009FDB"/></linearGradient><linearGradient id="gbdpxh1o6o2u1" x1="50%" x2="50%" y1="0%" y2="100%"><stop offset="0%" stop-color="#3786BE"/><stop offset="100%" stop-color="#0568AE"/></linearGradient></defs><g><line style="stroke:#C2C2C2;stroke-width:2.0833333333333335;stroke-dasharray:5.0,5.0;" x1="89.5833" x2="89.5833" y1="52.0508" y2="595.3776"/><line style="stroke:#C2C2C2;stroke-width:2.0833333333333335;stroke-dasharray:5.0,5.0;" x1="330.2083" x2="330.2083" y1="52.0508" y2="595.3776"/><rect fill="url(#gbdpxh1o6o2u0)" height="45.8008" rx="10.4167" ry="10.4167" style="stroke:#33B2E2;stroke-width:1.5625;" width="75" x="52.0833" y="5.2083"/><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="43.75" x="67.7083" y="32.4361">Parent</text><rect fill="url(#gbdpxh1o6o2u0)" height="45.8008" rx="10.4167" ry="10.4167" style="stroke:#33B2E2;stroke-width:1.5625;" width="75" x="52.0833" y="594.3359"/><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="43.75" x="67.7083" y="621.5637">Parent</text><rect fill="url(#gbdpxh1o6o2u0)" height="45.8008" rx="10.4167" ry="10.4167" style="stroke:#33B2E2;stroke-width:1.5625;" width="75" x="292.7083" y="5.2083"/><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="43.75" x="308.3333" y="32.4361">IFrame</text><rect fill="url(#gbdpxh1o6o2u0)" height="45.8008" rx="10.4167" ry="10.4167" style="stroke:#33B2E2;stroke-width:1.5625;" width="75" x="292.7083" y="594.3359"/><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="43.75" x="308.3333" y="621.5637">IFrame</text><path d="M5.2083,78.0924 L5.2083,97.8841 A10.4167,10.4167 0 0 0 15.625,108.3008 L164.5833,108.3008 A10.4167,10.4167 0 0 0 175,97.8841 L175,78.0924 L164.5833,67.6758 L15.625,67.6758 A10.4167,10.4167 0 0 0 5.2083,78.0924 " fill="url(#gbdpxh1o6o2u1)" style="stroke:#0568AE;stroke-width:1.0416666666666667;"/><path d="M164.5833,67.6758 L164.5833,72.8841 A5.2083,5.2083 0 0 0 169.7917,78.0924 L175,78.0924 L164.5833,67.6758 " fill="url(#gbdpxh1o6o2u1)" style="stroke:#0568AE;stroke-width:1.0416666666666667;"/><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="131.25" x="19.7917" y="92.8202">Waits for the IFrame</text><path d="M280.2083,130.1432 L280.2083,149.9349 A10.4167,10.4167 0 0 0 290.625,160.3516 L368.75,160.3516 A10.4167,10.4167 0 0 0 379.1667,149.9349 L379.1667,130.1432 L368.75,119.7266 L290.625,119.7266 A10.4167,10.4167 0 0 0 280.2083,130.1432 " fill="url(#gbdpxh1o6o2u1)" style="stroke:#0568AE;stroke-width:1.0416666666666667;"/><path d="M368.75,119.7266 L368.75,124.9349 A5.2083,5.2083 0 0 0 373.9583,130.1432 L379.1667,130.1432 L368.75,119.7266 " fill="url(#gbdpxh1o6o2u1)" style="stroke:#0568AE;stroke-width:1.0416666666666667;"/><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="60.4167" x="294.7917" y="144.871">Starts up</text><line style="stroke:#009FDB;stroke-width:3.125;" x1="330.2083" x2="373.9583" y1="218.5872" y2="218.5872"/><line style="stroke:#009FDB;stroke-width:3.125;" x1="373.9583" x2="373.9583" y1="218.5872" y2="232.1289"/><line style="stroke:#009FDB;stroke-width:3.125;" x1="331.25" x2="373.9583" y1="232.1289" y2="232.1289"/><polygon fill="#009FDB" points="341.6667,227.9622,331.25,232.1289,341.6667,236.2956,337.5,232.1289" style="stroke:#009FDB;stroke-width:1.0416666666666667;"/><text fill="#5A5A5A" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="138.5417" x="345.8333" y="190.6718">Adds a event listener</text><text fill="#5A5A5A" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="187.5" x="345.8333" y="205.2226">for receiving a message port</text><polygon fill="#009FDB" points="101.0417,273.763,90.625,277.9297,101.0417,282.0964,96.875,277.9297" style="stroke:#009FDB;stroke-width:1.0416666666666667;"/><line style="stroke:#009FDB;stroke-width:3.125;" x1="94.7917" x2="329.1667" y1="277.9297" y2="277.9297"/><text fill="#5A5A5A" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="144.7917" x="115.625" y="264.565">postMessage("ready")</text><path d="M22.9167,301.888 L22.9167,336.263 A10.4167,10.4167 0 0 0 33.3333,346.6797 L385.4167,346.6797 A10.4167,10.4167 0 0 0 395.8333,336.263 L395.8333,301.888 L385.4167,291.4714 L33.3333,291.4714 A10.4167,10.4167 0 0 0 22.9167,301.888 " fill="url(#gbdpxh1o6o2u1)" style="stroke:#0568AE;stroke-width:1.0416666666666667;"/><path d="M385.4167,291.4714 L385.4167,296.6797 A5.2083,5.2083 0 0 0 390.625,301.888 L395.8333,301.888 L385.4167,291.4714 " fill="url(#gbdpxh1o6o2u1)" style="stroke:#0568AE;stroke-width:1.0416666666666667;"/><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="328.125" x="40.625" y="316.6158">Now that the IFrame has communicated it's ready,</text><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="172.9167" x="44.7917" y="331.1666">we know that it's listening.</text><polygon fill="#009FDB" points="317.7083,400.7161,328.125,404.8828,317.7083,409.0495,321.875,404.8828" style="stroke:#009FDB;stroke-width:1.0416666666666667;"/><line style="stroke:#009FDB;stroke-width:3.125;" x1="89.5833" x2="323.9583" y1="404.8828" y2="404.8828"/><text fill="#5A5A5A" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="198.9583" x="105.2083" y="376.9674">postMessage("message-port")</text><text fill="#5A5A5A" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="146.875" x="105.2083" y="391.5181">with the message port</text><line style="stroke:#009FDB;stroke-width:3.125;" x1="330.2083" x2="373.9583" y1="465.2344" y2="465.2344"/><line style="stroke:#009FDB;stroke-width:3.125;" x1="373.9583" x2="373.9583" y1="465.2344" y2="478.776"/><line style="stroke:#009FDB;stroke-width:3.125;" x1="331.25" x2="373.9583" y1="478.776" y2="478.776"/><polygon fill="#009FDB" points="341.6667,474.6094,331.25,478.776,341.6667,482.9427,337.5,478.776" style="stroke:#009FDB;stroke-width:1.0416666666666667;"/><text fill="#5A5A5A" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="189.5833" x="345.8333" y="437.3189">Attach a onmessage handler</text><text fill="#5A5A5A" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="130.2083" x="350" y="451.8697">to the received port</text><path d="M22.9167,502.7344 L22.9167,522.526 A10.4167,10.4167 0 0 0 33.3333,532.9427 L385.4167,532.9427 A10.4167,10.4167 0 0 0 395.8333,522.526 L395.8333,502.7344 L385.4167,492.3177 L33.3333,492.3177 A10.4167,10.4167 0 0 0 22.9167,502.7344 " fill="url(#gbdpxh1o6o2u1)" style="stroke:#0568AE;stroke-width:1.0416666666666667;"/><path d="M385.4167,492.3177 L385.4167,497.526 A5.2083,5.2083 0 0 0 390.625,502.7344 L395.8333,502.7344 L385.4167,492.3177 " fill="url(#gbdpxh1o6o2u1)" style="stroke:#0568AE;stroke-width:1.0416666666666667;"/><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="200" x="104.6875" y="517.4622">We are ready to communicate.</text><polygon fill="#009FDB" points="317.7083,572.4609,328.125,576.6276,317.7083,580.7943,321.875,576.6276" style="stroke:#009FDB;stroke-width:1.0416666666666667;"/><line style="stroke:#009FDB;stroke-width:3.125;" x1="89.5833" x2="323.9583" y1="576.6276" y2="576.6276"/><text fill="#5A5A5A" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="159.375" x="105.2083" y="563.2629">port.postMessage(data)</text><!--MD5=[9c169f372e7244051912bca2b3017ee6]
@startuml iframe-protocol
!theme bluegray
note over Parent: Waits for the IFrame
note over IFrame: Starts up
IFrame->IFrame: Adds a event listener\nfor receiving a message port
IFrame->Parent: postMessage("ready")
note across: Now that the IFrame has communicated it's ready,\n we know that it's listening.
Parent->IFrame: postMessage("message-port")\nwith the message port
IFrame->IFrame: Attach a onmessage handler\n to the received port
note across: We are ready to communicate.
Parent->IFrame: port.postMessage(data)
@enduml

@startuml iframe-protocol



skinparam backgroundColor transparent
skinparam useBetaStyle false









skinparam defaultFontName        "Verdana"
skinparam defaultFontSize        12
skinparam dpi                    100
skinparam shadowing              false
skinparam roundcorner            20
skinparam ParticipantPadding     30
skinparam BoxPadding             40
skinparam Padding                8
skinparam ArrowColor             #959595
skinparam stereotype {
    CBackgroundColor #f5f5f5
    CBorderColor #c2c2c2
    ABackgroundColor #c4ca33
    ABorderColor #919700
    IBackgroundColor #d95555
    IBorderColor #a62222
    EBackgroundColor #ee9033
    EBorderColor #bb5d00
    NBackgroundColor #3786be
    NBorderColor #04538b
}
skinparam title {
	FontColor	                 #009fdb
	BorderColor	                 #c2c2c2
	FontSize	    	         20
	BorderRoundCorner            8
	BorderThickness 	         1
	BackgroundColor              #f5f5f5-#f2f2f2
}


skinparam legend {
	BackgroundColor #f2f2f2
	BorderColor #c2c2c2
	FontColor #5a5a5a
}

skinparam swimlane {
	BorderColor #0568ae
	BorderThickness 2
	TitleBackgroundColor  #f5f5f5-#f2f2f2
	TitleFontColor #009fdb
}


skinparam activity {
	FontColor #fff
	BorderColor #009fdb
	BackgroundColor #33b2e2-#009fdb
	BarColor #b5bd00
	StartColor #0568ae
	EndColor #0568ae
	DiamondBackgroundColor #f5f5f5-#c2c2c2
  	DiamondBorderColor #c2c2c2
	DiamondFontColor #5a5a5a
}


skinparam participant {

	FontColor #fff
	BorderColor #33b2e2
	BackgroundColor #33b2e2-#009fdb

	ParticipantBorderThickness 2
}


skinparam actor {

	FontColor #fff
	BorderColor #33b2e2
	BackgroundColor #33b2e2-#009fdb

	FontColor #009fdb
}


skinparam arrow {
	Thickness 3
	Color #009fdb
	FontColor #5a5a5a
}


skinparam sequence {
	BorderColor #009fdb
	TitleFontColor #009fdb
	BackgroundColor transparent
	StartColor #009fdb
	EndColor #009fdb
	BoxBackgroundColor #d2d2d2
	BoxBorderColor #959595
	BoxFontColor #5a5a5a
	LifeLineBorderColor #c2c2c2
	LifeLineBorderThickness 2
	LifeLineBackgroundColor #f5f5f5
	GroupBorderColor #959595
	GroupFontColor #5a5a5a
	GroupHeaderFontColor #0568ae
	DividerBackgroundColor #fff-#d2d2d2
    DividerBorderColor #959595
    DividerBorderThickness 2
    DividerFontColor #5a5a5a
	ReferenceBackgroundColor transparent
	ReferenceBorderColor #959595
	ReferenceFontColor #5a5a5a
	ReferenceHeaderFontColor #0568ae
}


skinparam partition {
	BorderColor #009fdb
	FontColor #009fdb
	BackgroundColor transparent
}


skinparam collections {

	FontColor #fff
	BorderColor #33b2e2
	BackgroundColor #33b2e2-#009fdb

}


skinparam control {

	FontColor #fff
	BorderColor #33b2e2
	BackgroundColor #33b2e2-#009fdb

	FontColor #009fdb
}


skinparam entity {

	FontColor #fff
	BorderColor #33b2e2
	BackgroundColor #33b2e2-#009fdb

	FontColor #009fdb
}


skinparam boundary {

	FontColor #fff
	BorderColor #33b2e2
	BackgroundColor #33b2e2-#009fdb

	FontColor #009fdb
}


skinparam agent {
	BackgroundColor #orange
	BorderColor #999999
	FontColor #333333
}


skinparam note {
	BorderThickness 1
	BackgroundColor #3786be-#0568ae
	BorderColor #0568ae
	FontColor #fff
}


skinparam artifact {
	BackgroundColor #fff-#d2d2d2
	BorderColor #c2c2c2
	FontColor #5a5a5a
}


skinparam component {

	FontColor #fff
	BorderColor #33b2e2
	BackgroundColor #33b2e2-#009fdb

}


skinparam interface {
	BackgroundColor  #d95555
	BorderColor  #cf2a2a
	FontColor #5a5a5a
}


skinparam storage {
	BackgroundColor #ee9033-#ea7400
  	BorderColor #ea7400
	FontColor #fff
}


skinparam node {
	BackgroundColor #f5f5f5-#f2f2f2
	BorderColor #c2c2c2
	FontColor #009fdb
}


skinparam cloud {
	BackgroundColor #F2FCFE-#eeeeee
	BorderColor #F2FCFE
	FontColor #009fdb
}


skinparam database {

	FontColor #fff
	BorderColor #33b2e2
	BackgroundColor #33b2e2-#009fdb

	BorderColor #007faf
}


skinparam class {

	FontColor #fff
	BorderColor #33b2e2
	BackgroundColor #33b2e2-#009fdb

	HeaderBackgroundColor #33b2e2-#009fdb
	StereotypeFontColor #5a5a5a
	BorderThickness 1
	AttributeFontColor #d2d2d2
	AttributeFontSize 11
}


skinparam object {

	FontColor #fff
	BorderColor #33b2e2
	BackgroundColor #33b2e2-#009fdb

	StereotypeFontColor #5a5a5a
	BorderThickness 1
	AttributeFontColor #d2d2d2
	AttributeFontSize 11
}


skinparam usecase {

	FontColor #fff
	BorderColor #33b2e2
	BackgroundColor #33b2e2-#009fdb

	BorderThickness 2
	StereotypeFontColor #009fdb
}


skinparam rectangle {
		FontColor #5a5a5a
	BorderColor #c2c2c2
	BackgroundColor #fff-#fefefe
	BorderThickness 2
	StereotypeFontColor #009fdb
}


skinparam package {
	FontColor #009fdb
	BorderColor #33b2e2
	BackgroundColor transparent
	BorderThickness 2
}


skinparam folder {
	BackgroundColor #fff-#f5f5f5
  	BorderColor #ea7400
	FontColor #ea7400
	BorderThickness 2
}


skinparam frame {
	BackgroundColor #fff-#f5f5f5
  	BorderColor #0568ae
	FontColor #0568ae
	BorderThickness 2
}


skinparam state {

	FontColor #fff
	BorderColor #33b2e2
	BackgroundColor #33b2e2-#009fdb

	BorderColor #007faf
	StartColor #0568ae
	EndColor #0568ae
	AttributeFontColor #d2d2d2
	AttributeFontSize 11
}


skinparam queue {

	FontColor #fff
	BorderColor #33b2e2
	BackgroundColor #33b2e2-#009fdb

}


skinparam card {
	BackgroundColor #3786be-#0568ae
	BorderColor #0568ae
	FontColor #fff
}


skinparam file {
	BackgroundColor #f5f5f5-#f2f2f2
	BorderColor #0568ae
	FontColor #5a5a5a

}


note over Parent: Waits for the IFrame
note over IFrame: Starts up
IFrame->IFrame: Adds a event listener\nfor receiving a message port
IFrame->Parent: postMessage("ready")
note across: Now that the IFrame has communicated it's ready,\n we know that it's listening.
Parent->IFrame: postMessage("message-port")\nwith the message port
IFrame->IFrame: Attach a onmessage handler\n to the received port
note across: We are ready to communicate.
Parent->IFrame: port.postMessage(data)
@enduml

PlantUML version 1.2021.7(Sun May 23 15:40:07 EEST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: IE
--></g></svg>
