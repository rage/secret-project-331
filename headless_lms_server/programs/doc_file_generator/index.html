<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="The doc file generator is used to write example JSON and TypeScript definitions for the docs of return values of API endpoints."><meta name="keywords" content="rust, rustlang, rust-lang, doc_file_generator"><title>headless_lms_server::programs::doc_file_generator - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" type="text/css" href="../../../normalize.css"><link rel="stylesheet" type="text/css" href="../../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../../ayu.css" disabled><link rel="stylesheet" type="text/css" href="../../../dark.css" disabled><link rel="stylesheet" type="text/css" href="../../../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../../../storage.js"></script><script defer src="../../../main.js"></script><noscript><link rel="stylesheet" href="../../../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../../../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../../../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../../../favicon.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../../../headless_lms_server/index.html"><div class="logo-container"><img class="rust-logo" src="../../../rust-logo.svg" alt="logo"></div></a><h2 class="location"></h2></nav><nav class="sidebar"><a class="sidebar-logo" href="../../../headless_lms_server/index.html"><div class="logo-container"><img class="rust-logo" src="../../../rust-logo.svg" alt="logo"></div></a><h2 class="location"><a href="#">Module doc_file_generator</a></h2><div class="sidebar-elems"><section><div class="block"><ul><li><a href="#modules">Modules</a></li><li><a href="#functions">Functions</a></li></ul></div></section></div></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../../../headless_lms_server/index.html"><img class="rust-logo" src="../../../rust-logo.svg" alt="logo"></a><nav class="sub"><form class="search-form"><div class="search-container"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press â€˜Sâ€™ to search, â€˜?â€™ for more optionsâ€¦" type="search"><div id="help-button" title="help" tabindex="-1"><button type="button">?</button></div><div id="settings-menu" tabindex="-1"><a href="../../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../../wheel.svg"></a></div></div></form></nav></div><section id="main-content" class="content"><div class="main-heading"><h1 class="fqn"><span class="in-band">Module <a href="../../index.html">headless_lms_server</a>::<wbr><a href="../index.html">programs</a>::<wbr><a class="mod" href="#">doc_file_generator</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span></h1><span class="out-of-band"><a class="srclink" href="../../../src/headless_lms_server/programs/doc_file_generator/mod.rs.html#1-1392">source</a> Â· <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>The doc file generator is used to write example JSON and TypeScript definitions for the docs of return values of API endpoints.</p>
<p>This is done by writing .json and .ts files that can be discovered by the #<a href="../../../doc_macro/attr.generated_doc.html" title="generated_doc">generated_doc</a> attribute macro that is used by API endpoints.</p>
<p>To make this process more convenient, two macros are provided:</p>
<ul>
<li>example! (proc macro defined in the doc_macros crate)</li>
<li>doc! (declarative macro defined in this file)</li>
</ul>
<h3 id="example"><a href="#example">example!</a></h3>
<p>Accepts a struct or enum literal, such as</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="macro">example!</span>(<span class="ident">SomeStruct</span> {
    <span class="ident">first_field</span>,
    <span class="ident">second_field</span>: <span class="number">1234</span>,
});</code></pre></div>
<p>and implements the Example trait for the given type:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">impl</span> <span class="ident">Example</span> <span class="kw">for</span> <span class="ident">SomeStruct</span> {
    <span class="kw">fn</span> <span class="ident">example</span>() -&gt; <span class="self">Self</span> {
        <span class="self">Self</span> {
            <span class="ident">first_field</span>: <span class="ident">Example::example</span>(),
            <span class="ident">second_field</span>: <span class="number">1234</span>,
        }
    }
}</code></pre></div>
<p>As can be seen in the code above, you can leave out the value of any field to use its Example implementation.</p>
<p>The Example trait is used for the doc! macro as explained below.</p>
<h3 id="doc"><a href="#doc">doc!</a></h3>
<p>Writes the JSON and TypeScript files used for API endpoint docs.</p>
<p>This macro can be used in two primary ways:</p>
<ul>
<li>With a struct/enum literal</li>
<li>With a type and expression</li>
</ul>
<p>With a struct/enum literal, the doc! macro generates an Example implementation for the type using the example! macro
and then uses it to write the JSON docs. (The TypeScript definition is generated with the <code>ts_rs::TS</code> trait)</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="macro">doc!</span>(<span class="ident">SomeStruct</span> {
    <span class="ident">first_field</span>,
    <span class="ident">second_field</span>: <span class="number">1234</span>,
});</code></pre></div>
<p>In addition to the <code>impl Example for SomeStruct</code>, it will serialize <code>&lt;SomeStruct as Example&gt;::example()</code> to JSON and write it to generated-docs/SomeStruct.json,
as well as <code>&lt;SomeStruct as TS&gt;::inline()</code> to generated-docs/SomeStruct.ts.</p>
<p>Note that because it uses the example! macro, you can leave out values for fields the same way.</p>
<p>The struct/enum literal can be prepended with T, Opt, or Vec, in order to generate docs for the given type (T), Option of the given type (Opt), or Vec of the given type (Vec).
Note that they must be in the order T, Opt, Vec, though you can leave any (or all) of them out.</p>
<p>For example,</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="macro">doc!</span>(
    <span class="ident">T</span>,
    <span class="ident">Vec</span>,
    <span class="ident">SomeStruct</span> {
        <span class="ident">first_field</span>,
        <span class="ident">second_field</span>: <span class="number">1234</span>,
    }
);</code></pre></div>
<p>will create docs for SomeStruct and Vec<SomeStruct>.</p>
<p>With a type and expression, the doc! macro simply uses the expression to write the JSON docs for the given type without involving the Example trait or example! macro.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="macro">doc!</span>(
    <span class="ident">Vec</span><span class="op">&lt;</span><span class="ident">SomeStruct</span><span class="op">&gt;</span>,
    <span class="macro">vec!</span>[
        <span class="ident">SomeStruct</span> {
            <span class="ident">first_field</span>: <span class="ident">Example::example</span>(),
            <span class="ident">second_field</span>: <span class="number">2</span>,
        },
        <span class="ident">SomeStruct</span> {
            <span class="ident">first_field</span>: <span class="number">3</span>,
            <span class="ident">second_field</span>: <span class="number">4</span>,
        },
    ]
);</code></pre></div>
<p>Note that since this method doesnâ€™t use the example! macro, leaving out field values is an error. If we want to use the Example trait here, we need to explicitly call Example::example()
or the ex() function which is just a shortcut for Example::example().</p>
<p>This method is mainly useful for external/std types. For example, we cannot write Uuid as a struct literal because it has private fields, or bool because itâ€™s a primitive type.</p>
</div></details><h2 id="modules" class="small-section-header"><a href="#modules">Modules</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="mod" href="example/index.html" title="headless_lms_server::programs::doc_file_generator::example mod">example</a></div><div class="item-right docblock-short"></div></div></div><h2 id="functions" class="small-section-header"><a href="#functions">Functions</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.controllers.html" title="headless_lms_server::programs::doc_file_generator::controllers fn">controllers</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.ex.html" title="headless_lms_server::programs::doc_file_generator::ex fn">ex</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.main.html" title="headless_lms_server::programs::doc_file_generator::main fn">main</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.models.html" title="headless_lms_server::programs::doc_file_generator::models fn">models</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.utils.html" title="headless_lms_server::programs::doc_file_generator::utils fn">utils</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.write_json.html" title="headless_lms_server::programs::doc_file_generator::write_json fn">write_json</a></div><div class="item-right docblock-short"></div></div></div></section></div></main><div id="rustdoc-vars" data-root-path="../../../" data-current-crate="headless_lms_server" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.64.0 (a55dd71d5 2022-09-19)" ></div></body></html>