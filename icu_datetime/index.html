<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Formatting date and time."><title>icu_datetime - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-dd39b87e5fcfba68.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="icu_datetime" data-themes="" data-resource-suffix="" data-rustdoc-version="1.80.1 (3f5fd8dd4 2024-08-06)" data-channel="1.80.1" data-search-js="search-d52510db62a78183.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../static.files/storage-118b08c4c78b968e.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-20a3ad099b048cf2.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-df360f571f6edeae.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../icu_datetime/index.html">icu_datetime</a><span class="version">1.5.1</span></h2></div><div class="sidebar-elems"><ul class="block"><li><a id="all-types" href="all.html">All Items</a></li></ul><section><ul class="block"><li><a href="#reexports">Re-exports</a></li><li><a href="#modules">Modules</a></li><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#traits">Traits</a></li></ul></section></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Crate <a class="mod" href="#">icu_datetime</a><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><span class="out-of-band"><a class="src" href="../src/icu_datetime/lib.rs.html#5-182">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Formatting date and time.</p>
<p>This module is published as its own crate (<a href="https://docs.rs/icu_datetime/latest/icu_datetime/"><code>icu_datetime</code></a>)
and as part of the <a href="https://docs.rs/icu/latest/icu/"><code>icu</code></a> crate. See the latter for more details on the ICU4X project.</p>
<p><a href="struct.TypedDateTimeFormatter.html" title="struct icu_datetime::TypedDateTimeFormatter"><code>TypedDateTimeFormatter</code></a> and <a href="struct.DateTimeFormatter.html" title="struct icu_datetime::DateTimeFormatter"><code>DateTimeFormatter</code></a> are the main types of the component. They accepts a set of arguments which
allow it to collect necessary data from the <a href="../icu_provider/index.html" title="mod icu_provider">data provider</a>, and once instantiated, can be
used to quickly format any date and time provided. There are variants of these types that can format greater or fewer components,
including <a href="struct.TypedDateFormatter.html" title="struct icu_datetime::TypedDateFormatter"><code>TypedDateFormatter</code></a> &amp; <a href="struct.DateFormatter.html" title="struct icu_datetime::DateFormatter"><code>DateFormatter</code></a>, <a href="struct.TypedZonedDateTimeFormatter.html" title="struct icu_datetime::TypedZonedDateTimeFormatter"><code>TypedZonedDateTimeFormatter</code></a> &amp; <a href="struct.ZonedDateTimeFormatter.html" title="struct icu_datetime::ZonedDateTimeFormatter"><code>ZonedDateTimeFormatter</code></a>, <a href="struct.TimeFormatter.html" title="struct icu_datetime::TimeFormatter"><code>TimeFormatter</code></a>,
and <a href="time_zone/struct.TimeZoneFormatter.html" title="struct icu_datetime::time_zone::TimeZoneFormatter"><code>TimeZoneFormatter</code></a></p>
<p>These formatters work with types from the <a href="calendar::%7BCalendar%7D"><code>calendar</code></a> module, like <a href="calendar::%7BDate%7D"><code>Date</code></a>, <a href="calendar::%7BDateTime%7D"><code>DateTime</code></a>, and <a href="calendar::types::%7BTime%7D"><code>Time</code></a>,
and <a href="icu::timezone::%7BCustomTimeZone%7D"><code>timezone::CustomTimeZone</code></a>, however other types may be used provided they implement the traits from the <a href="input/index.html" title="mod icu_datetime::input"><code>input</code></a> module.</p>
<p>Each instance of a date-related formatter (i.e. not <a href="struct.TimeFormatter.html" title="struct icu_datetime::TimeFormatter"><code>TimeFormatter</code></a> or <a href="time_zone/struct.TimeZoneFormatter.html" title="struct icu_datetime::time_zone::TimeZoneFormatter"><code>TimeZoneFormatter</code></a>
is associated with a particular <a href="calendar::%7BCalendar%7D"><code>Calendar</code></a>.
The “Typed” vs untyped formatter distinction is to help with this. For example, if you know at compile time that you
will only be formatting Gregorian dates, you can use <a href="struct.TypedDateTimeFormatter.html" title="struct icu_datetime::TypedDateTimeFormatter"><code>TypedDateTimeFormatter&lt;Gregorian&gt;</code></a> and the
APIs will make sure that only Gregorian <a href="calendar::%7BDateTime%7D"><code>DateTime</code></a>s are used with the calendar. On the other hand, if you want to be able to select
the calendar at runtime, you can use <a href="struct.DateTimeFormatter.html" title="struct icu_datetime::DateTimeFormatter"><code>DateTimeFormatter</code></a> with the calendar specified in the locale, and use it with
<a href="calendar::%7BDateTime%7D"><code>DateTime</code></a>,<a href="calendar::any_calendar::%7BAnyCalendar%7D"><code>AnyCalendar</code></a>. These formatters still require dates associated
with the appropriate calendar (though they will convert ISO dates to the calendar if provided), they just do not force the
programmer to pick the calendar at compile time.</p>
<h2 id="examples"><a class="doc-anchor" href="#examples">§</a>Examples</h2>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>icu::calendar::{DateTime, Gregorian};
<span class="kw">use </span>icu::datetime::{
    options::length, DateTimeFormatter, DateTimeFormatterOptions,
    TypedDateTimeFormatter,
};
<span class="kw">use </span>icu::locid::{locale, Locale};
<span class="kw">use </span>std::str::FromStr;
<span class="kw">use </span>writeable::assert_writeable_eq;

<span class="comment">// See the next code example for a more ergonomic example with .into().
</span><span class="kw">let </span>options =
    DateTimeFormatterOptions::Length(length::Bag::from_date_time_style(
        length::Date::Medium,
        length::Time::Short,
    ));

<span class="comment">// You can work with a formatter that can select the calendar at runtime:
</span><span class="kw">let </span>locale = Locale::from_str(<span class="string">"en-u-ca-gregory"</span>).unwrap();
<span class="kw">let </span>dtf = DateTimeFormatter::try_new(<span class="kw-2">&amp;</span>locale.into(), options.clone())
    .expect(<span class="string">"Failed to create DateTimeFormatter instance."</span>);

<span class="comment">// Or one that selects a calendar at compile time:
</span><span class="kw">let </span>typed_dtf = TypedDateTimeFormatter::&lt;Gregorian&gt;::try_new(
    <span class="kw-2">&amp;</span><span class="macro">locale!</span>(<span class="string">"en"</span>).into(),
    options,
)
.expect(<span class="string">"Failed to create TypedDateTimeFormatter instance."</span>);

<span class="kw">let </span>typed_date =
    DateTime::try_new_gregorian_datetime(<span class="number">2020</span>, <span class="number">9</span>, <span class="number">12</span>, <span class="number">12</span>, <span class="number">34</span>, <span class="number">28</span>).unwrap();
<span class="comment">// prefer using ISO dates with DateTimeFormatter
</span><span class="kw">let </span>date = typed_date.to_iso().to_any();

<span class="kw">let </span>formatted_date = dtf.format(<span class="kw-2">&amp;</span>date).expect(<span class="string">"Calendars should match"</span>);
<span class="kw">let </span>typed_formatted_date = typed_dtf.format(<span class="kw-2">&amp;</span>typed_date);

<span class="macro">assert_writeable_eq!</span>(formatted_date, <span class="string">"Sep 12, 2020, 12:34 PM"</span>);
<span class="macro">assert_writeable_eq!</span>(typed_formatted_date, <span class="string">"Sep 12, 2020, 12:34 PM"</span>);

<span class="kw">let </span>formatted_date_string =
    dtf.format_to_string(<span class="kw-2">&amp;</span>date).expect(<span class="string">"Calendars should match"</span>);
<span class="kw">let </span>typed_formatted_date_string = typed_dtf.format_to_string(<span class="kw-2">&amp;</span>typed_date);

<span class="macro">assert_eq!</span>(formatted_date_string, <span class="string">"Sep 12, 2020, 12:34 PM"</span>);
<span class="macro">assert_eq!</span>(typed_formatted_date_string, <span class="string">"Sep 12, 2020, 12:34 PM"</span>);</code></pre></div>
<p>The options can be created more ergonomically using the <code>Into</code> trait to automatically
convert a <a href="options/length/struct.Bag.html" title="struct icu_datetime::options::length::Bag"><code>options::length::Bag</code></a> into a <a href="options/enum.DateTimeFormatterOptions.html#variant.Length" title="variant icu_datetime::options::DateTimeFormatterOptions::Length"><code>DateTimeFormatterOptions::Length</code></a>.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>icu::calendar::Gregorian;
<span class="kw">use </span>icu::datetime::{
    options::length, DateTimeFormatterOptions, TypedDateTimeFormatter,
};
<span class="kw">use </span>icu::locid::locale;
<span class="kw">let </span>options = length::Bag::from_date_time_style(
    length::Date::Medium,
    length::Time::Short,
)
.into();

<span class="kw">let </span>dtf = TypedDateTimeFormatter::&lt;Gregorian&gt;::try_new(
    <span class="kw-2">&amp;</span><span class="macro">locale!</span>(<span class="string">"en"</span>).into(),
    options,
);</code></pre></div>
<p>At the moment, the crate provides only options using the <a href="options/length/index.html" title="mod icu_datetime::options::length"><code>Length</code></a> bag, but in the future,
we expect to add more ways to customize the output, like skeletons, and components.</p>
</div></details><h2 id="reexports" class="section-header">Re-exports<a href="#reexports" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name" id="reexport.DateTimeFormatterOptions"><code>pub use options::<a class="enum" href="options/enum.DateTimeFormatterOptions.html" title="enum icu_datetime::options::DateTimeFormatterOptions">DateTimeFormatterOptions</a>;</code></div></li><li><div class="item-name" id="reexport.Error"><code>pub use <a class="enum" href="enum.DateTimeError.html" title="enum icu_datetime::DateTimeError">DateTimeError</a> as Error;</code></div></li></ul><h2 id="modules" class="section-header">Modules<a href="#modules" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="mod" href="fields/index.html" title="mod icu_datetime::fields">fields</a></div><div class="desc docblock-short">Enums representing the fields in a date pattern, including the field’s type, length and symbol.</div></li><li><div class="item-name"><a class="mod" href="input/index.html" title="mod icu_datetime::input">input</a></div><div class="desc docblock-short">A collection of utilities for representing and working with dates as an input to
formatting operations.</div></li><li><div class="item-name"><a class="mod" href="options/index.html" title="mod icu_datetime::options">options</a></div><div class="desc docblock-short"><a href="options/enum.DateTimeFormatterOptions.html" title="enum icu_datetime::options::DateTimeFormatterOptions"><code>DateTimeFormatterOptions</code></a> is a bag of options which, together with <a href="../icu_locid/locale/struct.Locale.html" title="struct icu_locid::locale::Locale"><code>Locale</code></a>,
defines how dates will be formatted with a <a href="struct.TypedDateTimeFormatter.html" title="struct icu_datetime::TypedDateTimeFormatter"><code>TypedDateTimeFormatter</code></a> instance.</div></li><li><div class="item-name"><a class="mod" href="provider/index.html" title="mod icu_datetime::provider">provider</a></div><div class="desc docblock-short">🚧 [Unstable] Data provider struct definitions for this ICU4X component.</div></li><li><div class="item-name"><a class="mod" href="time_zone/index.html" title="mod icu_datetime::time_zone">time_zone</a></div><div class="desc docblock-short">A formatter specifically for the time zone.</div></li></ul><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.DateFormatter.html" title="struct icu_datetime::DateFormatter">DateFormatter</a></div><div class="desc docblock-short"><a href="struct.DateFormatter.html" title="struct icu_datetime::DateFormatter"><code>DateFormatter</code></a> is a formatter capable of formatting
dates from any calendar, selected at runtime. For the difference between this and <a href="struct.TypedDateFormatter.html" title="struct icu_datetime::TypedDateFormatter"><code>TypedDateFormatter</code></a>,
please read the <a href="index.html" title="mod icu_datetime">crate root docs</a>.</div></li><li><div class="item-name"><a class="struct" href="struct.DateTimeFormatter.html" title="struct icu_datetime::DateTimeFormatter">DateTimeFormatter</a></div><div class="desc docblock-short"><a href="struct.DateTimeFormatter.html" title="struct icu_datetime::DateTimeFormatter"><code>DateTimeFormatter</code></a> is a formatter capable of formatting
date/times from any calendar, selected at runtime. For the difference between this and <a href="struct.TypedDateTimeFormatter.html" title="struct icu_datetime::TypedDateTimeFormatter"><code>TypedDateTimeFormatter</code></a>,
please read the <a href="index.html" title="mod icu_datetime">crate root docs</a>.</div></li><li><div class="item-name"><a class="struct" href="struct.FormattedDateTime.html" title="struct icu_datetime::FormattedDateTime">FormattedDateTime</a></div><div class="desc docblock-short"><a href="struct.FormattedDateTime.html" title="struct icu_datetime::FormattedDateTime"><code>FormattedDateTime</code></a> is a intermediate structure which can be retrieved as
an output from <a href="struct.TypedDateTimeFormatter.html" title="struct icu_datetime::TypedDateTimeFormatter"><code>TypedDateTimeFormatter</code></a>.</div></li><li><div class="item-name"><a class="struct" href="struct.FormattedTimeZone.html" title="struct icu_datetime::FormattedTimeZone">FormattedTimeZone</a></div><div class="desc docblock-short"><a href="struct.FormattedTimeZone.html" title="struct icu_datetime::FormattedTimeZone"><code>FormattedTimeZone</code></a> is a intermediate structure which can be retrieved as an output from <a href="time_zone/struct.TimeZoneFormatter.html" title="struct icu_datetime::time_zone::TimeZoneFormatter"><code>TimeZoneFormatter</code></a>.</div></li><li><div class="item-name"><a class="struct" href="struct.FormattedZonedDateTime.html" title="struct icu_datetime::FormattedZonedDateTime">FormattedZonedDateTime</a></div><div class="desc docblock-short"><a href="struct.FormattedTimeZone.html" title="struct icu_datetime::FormattedTimeZone"><code>FormattedTimeZone</code></a> is a intermediate structure which can be retrieved
as an output from <a href="struct.ZonedDateTimeFormatter.html" title="struct icu_datetime::ZonedDateTimeFormatter"><code>ZonedDateTimeFormatter</code></a>.</div></li><li><div class="item-name"><a class="struct" href="struct.MismatchedCalendarError.html" title="struct icu_datetime::MismatchedCalendarError">MismatchedCalendarError</a></div><div class="desc docblock-short">An error from mixing calendar types in <a href="struct.DateTimeFormatter.html" title="struct icu_datetime::DateTimeFormatter"><code>DateTimeFormatter</code></a></div></li><li><div class="item-name"><a class="struct" href="struct.TimeFormatter.html" title="struct icu_datetime::TimeFormatter">TimeFormatter</a></div><div class="desc docblock-short"><a href="struct.TimeFormatter.html" title="struct icu_datetime::TimeFormatter"><code>TimeFormatter</code></a> is a structure of the <a href="index.html" title="mod icu_datetime"><code>icu::datetime</code></a> component that provides time formatting only.
When constructed, it uses data from the <a href="../icu_provider/index.html" title="mod icu_provider">data provider</a>, selected locale and provided preferences to
collect all data necessary to format any time into that locale.</div></li><li><div class="item-name"><a class="struct" href="struct.TypedDateFormatter.html" title="struct icu_datetime::TypedDateFormatter">TypedDateFormatter</a></div><div class="desc docblock-short"><a href="struct.TypedDateFormatter.html" title="struct icu_datetime::TypedDateFormatter"><code>TypedDateFormatter</code></a> is a formatter capable of formatting
dates from a calendar selected at compile time. For the difference between this
and <a href="struct.DateFormatter.html" title="struct icu_datetime::DateFormatter"><code>DateFormatter</code></a>, please read the <a href="index.html" title="mod icu_datetime">crate root docs</a>.</div></li><li><div class="item-name"><a class="struct" href="struct.TypedDateTimeFormatter.html" title="struct icu_datetime::TypedDateTimeFormatter">TypedDateTimeFormatter</a></div><div class="desc docblock-short"><a href="struct.TypedDateTimeFormatter.html" title="struct icu_datetime::TypedDateTimeFormatter"><code>TypedDateTimeFormatter</code></a> is a formatter capable of formatting
date/times from a calendar selected at compile time. For the difference between this
and <a href="struct.DateTimeFormatter.html" title="struct icu_datetime::DateTimeFormatter"><code>DateTimeFormatter</code></a>, please read the <a href="index.html" title="mod icu_datetime">crate root docs</a>.</div></li><li><div class="item-name"><a class="struct" href="struct.TypedZonedDateTimeFormatter.html" title="struct icu_datetime::TypedZonedDateTimeFormatter">TypedZonedDateTimeFormatter</a></div><div class="desc docblock-short">The composition of <a href="struct.TypedDateTimeFormatter.html" title="struct icu_datetime::TypedDateTimeFormatter"><code>TypedDateTimeFormatter</code></a> and <a href="time_zone/struct.TimeZoneFormatter.html" title="struct icu_datetime::time_zone::TimeZoneFormatter"><code>TimeZoneFormatter</code></a>.</div></li><li><div class="item-name"><a class="struct" href="struct.ZonedDateTimeFormatter.html" title="struct icu_datetime::ZonedDateTimeFormatter">ZonedDateTimeFormatter</a></div><div class="desc docblock-short"><a href="struct.ZonedDateTimeFormatter.html" title="struct icu_datetime::ZonedDateTimeFormatter"><code>ZonedDateTimeFormatter</code></a> is a formatter capable of formatting
date/times with time zones from any calendar, selected at runtime. For the difference between this and <a href="struct.TypedZonedDateTimeFormatter.html" title="struct icu_datetime::TypedZonedDateTimeFormatter"><code>TypedZonedDateTimeFormatter</code></a>,
please read the <a href="index.html" title="mod icu_datetime">crate root docs</a>.</div></li></ul><h2 id="enums" class="section-header">Enums<a href="#enums" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.DateTimeError.html" title="enum icu_datetime::DateTimeError">DateTimeError</a></div><div class="desc docblock-short">A list of error outcomes for various operations in this module.</div></li></ul><h2 id="traits" class="section-header">Traits<a href="#traits" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="trait" href="trait.CldrCalendar.html" title="trait icu_datetime::CldrCalendar">CldrCalendar</a></div><div class="desc docblock-short">A calendar that can be found in CLDR</div></li></ul></section></div></main></body></html>