<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Types for resolving and manipulating time zones."><title>icu_timezone - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-dd39b87e5fcfba68.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="icu_timezone" data-themes="" data-resource-suffix="" data-rustdoc-version="1.80.1 (3f5fd8dd4 2024-08-06)" data-channel="1.80.1" data-search-js="search-d52510db62a78183.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../static.files/storage-118b08c4c78b968e.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-20a3ad099b048cf2.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-df360f571f6edeae.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../icu_timezone/index.html">icu_timezone</a><span class="version">1.5.0</span></h2></div><div class="sidebar-elems"><ul class="block"><li><a id="all-types" href="all.html">All Items</a></li></ul><section><ul class="block"><li><a href="#reexports">Re-exports</a></li><li><a href="#modules">Modules</a></li><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li></ul></section></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Crate <a class="mod" href="#">icu_timezone</a><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><span class="out-of-band"><a class="src" href="../src/icu_timezone/lib.rs.html#5-154">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Types for resolving and manipulating time zones.</p>
<h2 id="fields-1"><a class="doc-anchor" href="#fields-1">§</a>Fields</h2>
<p>In ICU4X, a <a href="struct.CustomTimeZone.html" title="struct icu_timezone::CustomTimeZone">formattable time zone</a> consists of four different fields:</p>
<ol>
<li>The offset from GMT</li>
<li>The time zone ID</li>
<li>The metazone ID</li>
<li>The zone variant, representing concepts such as Standard, Summer, Daylight, and Ramadan time</li>
</ol>
<h3 id="gmt-offset"><a class="doc-anchor" href="#gmt-offset">§</a>GMT Offset</h3>
<p>The GMT offset precisely states the time difference between the time zone in question and
Greenwich Mean Time (GMT) or Coordinated Universal Time (UTC).</p>
<p>In localized strings, it is often rendered as “GMT-6”, meaning 6 hours less than GMT.</p>
<h3 id="time-zone"><a class="doc-anchor" href="#time-zone">§</a>Time Zone</h3>
<p>The time zone ID corresponds to a time zone from the time zone database. The time zone ID
usually corresponds to the largest city in the time zone.</p>
<p>There are two mostly-interchangeable standards for time zone IDs:</p>
<ol>
<li>IANA time zone IDs, like <code>&quot;America/Chicago&quot;</code></li>
<li>BCP-47 time zone IDs, like <code>&quot;uschi&quot;</code></li>
</ol>
<p>ICU4X uses BCP-47 time zone IDs for all of its APIs. To get a BCP-47 time zone from an
IANA time zone, use <a href="struct.TimeZoneIdMapper.html" title="struct icu_timezone::TimeZoneIdMapper"><code>TimeZoneIdMapper</code></a>.</p>
<h3 id="metazone"><a class="doc-anchor" href="#metazone">§</a>Metazone</h3>
<p>A metazone is a collection of multiple time zones that share the same localized formatting
at a particular date and time.</p>
<p>For example, “America/Chicago” and “America/Indiana/Knox” both map to US Central Time, or
<code>&quot;America_Central&quot;</code>.</p>
<p>The mapping from time zone to metazone depends on the date. For example, from 1991 to 2006,
“America/Indiana/Knox” mapped to US Eastern Time instead of US Central Time.</p>
<p>As with time zone IDs, there are two interchangeable forms:</p>
<ol>
<li>Long form, like <code>&quot;America_Central&quot;</code></li>
<li>Short form compatible with BCP-47, like <code>&quot;amce&quot;</code></li>
</ol>
<p>ICU4X uses the short form.</p>
<p>Note: in ICU4X, “metazone” is one word and “time zone” is two words, except for this crate
and module name, where “timezone” is used with no separators. See
<a href="https://github.com/unicode-org/icu4x/issues/2507">https://github.com/unicode-org/icu4x/issues/2507</a>.</p>
<h3 id="zone-variant"><a class="doc-anchor" href="#zone-variant">§</a>Zone Variant</h3>
<p>Many metazones use different names and offsets in the summer than in the winter. In ICU4X,
this is called the <em>zone variant</em>.</p>
<p>CLDR has two zone variants, named <code>&quot;standard&quot;</code> and <code>&quot;daylight&quot;</code>. However, the mapping of these
variants to specific observed offsets varies from time zone to time zone, and they may not
consistently represent winter versus summer time.</p>
<p>Note: It is optional (not required) to set the zone variant when constructing a
<a href="struct.CustomTimeZone.html" title="struct icu_timezone::CustomTimeZone"><code>CustomTimeZone</code></a>. Therefore, the list of possible variants does not include a generic variant
to represent the lack of a preference.</p>
<h2 id="calculations"><a class="doc-anchor" href="#calculations">§</a>Calculations</h2>
<p>In date/time processing, normally only a subset of information is available, and the other
fields must be computed from it.</p>
<p>The following calculations are currently supported or will be supported:</p>
<ol>
<li>Time Zone + Local DateTime → Meta Zone (<a href="struct.MetazoneCalculator.html" title="struct icu_timezone::MetazoneCalculator"><code>MetazoneCalculator</code></a>)</li>
<li>Time Zone + Absolute Time → Offset + Zone Variant (not yet supported)</li>
</ol>
<h2 id="examples"><a class="doc-anchor" href="#examples">§</a>Examples</h2>
<p>Create a time zone for which the offset and time zone ID are already known, and calculate
the metazone based on a certain local datetime:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>icu::calendar::DateTime;
<span class="kw">use </span>icu::timezone::CustomTimeZone;
<span class="kw">use </span>icu::timezone::GmtOffset;
<span class="kw">use </span>icu::timezone::MetazoneCalculator;
<span class="kw">use </span>icu::timezone::TimeZoneIdMapper;
<span class="kw">use </span>tinystr::{tinystr, TinyAsciiStr};

<span class="comment">// Create a time zone for America/Chicago at GMT-6:
</span><span class="kw">let </span><span class="kw-2">mut </span>time_zone = CustomTimeZone::new_empty();
time_zone.gmt_offset = <span class="string">"-0600"</span>.parse::&lt;GmtOffset&gt;().ok();
<span class="kw">let </span>mapper = TimeZoneIdMapper::new();
time_zone.time_zone_id =
    mapper.as_borrowed().iana_to_bcp47(<span class="string">"America/Chicago"</span>);

<span class="comment">// Alternatively, set it directly from the BCP-47 ID
</span><span class="macro">assert_eq!</span>(time_zone.time_zone_id, <span class="prelude-val">Some</span>(<span class="macro">tinystr!</span>(<span class="number">8</span>, <span class="string">"uschi"</span>).into()));

<span class="comment">// Compute the metazone at January 1, 2022:
</span><span class="kw">let </span>mzc = MetazoneCalculator::new();
<span class="kw">let </span>datetime = DateTime::try_new_iso_datetime(<span class="number">2022</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>).unwrap();
time_zone.maybe_calculate_metazone(<span class="kw-2">&amp;</span>mzc, <span class="kw-2">&amp;</span>datetime);

<span class="macro">assert_eq!</span>(<span class="string">"amce"</span>, time_zone.metazone_id.unwrap().<span class="number">0</span>.as_str());</code></pre></div>
</div></details><h2 id="reexports" class="section-header">Re-exports<a href="#reexports" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name" id="reexport.MetazoneId"><code>pub use provider::<a class="struct" href="provider/struct.MetazoneId.html" title="struct icu_timezone::provider::MetazoneId">MetazoneId</a>;</code></div></li><li><div class="item-name" id="reexport.TimeZoneBcp47Id"><code>pub use provider::<a class="struct" href="provider/struct.TimeZoneBcp47Id.html" title="struct icu_timezone::provider::TimeZoneBcp47Id">TimeZoneBcp47Id</a>;</code></div></li><li><div class="item-name" id="reexport.Error"><code>pub use <a class="enum" href="enum.TimeZoneError.html" title="enum icu_timezone::TimeZoneError">TimeZoneError</a> as Error;</code></div></li></ul><h2 id="modules" class="section-header">Modules<a href="#modules" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="mod" href="provider/index.html" title="mod icu_timezone::provider">provider</a></div><div class="desc docblock-short">🚧 [Unstable] Data provider struct definitions for this ICU4X component.</div></li></ul><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.CustomTimeZone.html" title="struct icu_timezone::CustomTimeZone">CustomTimeZone</a></div><div class="desc docblock-short">A utility type that can hold time zone information.</div></li><li><div class="item-name"><a class="struct" href="struct.GmtOffset.html" title="struct icu_timezone::GmtOffset">GmtOffset</a></div><div class="desc docblock-short">The GMT offset in seconds for a timezone</div></li><li><div class="item-name"><a class="struct" href="struct.IanaBcp47RoundTripMapper.html" title="struct icu_timezone::IanaBcp47RoundTripMapper">IanaBcp47RoundTripMapper</a><span class="stab deprecated" title="">Deprecated</span></div><div class="desc docblock-short">A mapper that supports mapping IANA identifiers to BCP-47 identifiers and also
the other way around.</div></li><li><div class="item-name"><a class="struct" href="struct.IanaBcp47RoundTripMapperBorrowed.html" title="struct icu_timezone::IanaBcp47RoundTripMapperBorrowed">IanaBcp47RoundTripMapperBorrowed</a><span class="stab deprecated" title="">Deprecated</span></div><div class="desc docblock-short">A borrowed wrapper around IANA-BCP47 time zone data, returned by
<a href="struct.IanaBcp47RoundTripMapper.html#method.as_borrowed" title="method icu_timezone::IanaBcp47RoundTripMapper::as_borrowed"><code>IanaBcp47RoundTripMapper::as_borrowed()</code></a>. More efficient to query.</div></li><li><div class="item-name"><a class="struct" href="struct.IanaToBcp47Mapper.html" title="struct icu_timezone::IanaToBcp47Mapper">IanaToBcp47Mapper</a><span class="stab deprecated" title="">Deprecated</span></div><div class="desc docblock-short">A mapper from IANA time zone identifiers to BCP-47 time zone identifiers.</div></li><li><div class="item-name"><a class="struct" href="struct.IanaToBcp47MapperBorrowed.html" title="struct icu_timezone::IanaToBcp47MapperBorrowed">IanaToBcp47MapperBorrowed</a><span class="stab deprecated" title="">Deprecated</span></div><div class="desc docblock-short">A borrowed wrapper around IANA-to-BCP47 time zone data, returned by
<a href="struct.IanaToBcp47Mapper.html#method.as_borrowed" title="method icu_timezone::IanaToBcp47Mapper::as_borrowed"><code>IanaToBcp47Mapper::as_borrowed()</code></a>. More efficient to query.</div></li><li><div class="item-name"><a class="struct" href="struct.MetazoneCalculator.html" title="struct icu_timezone::MetazoneCalculator">MetazoneCalculator</a></div><div class="desc docblock-short"><a href="struct.MetazoneCalculator.html" title="struct icu_timezone::MetazoneCalculator"><code>MetazoneCalculator</code></a> uses data from the <a href="../icu_provider/index.html" title="mod icu_provider">data provider</a> to calculate metazone id.</div></li><li><div class="item-name"><a class="struct" href="struct.TimeZoneIdMapper.html" title="struct icu_timezone::TimeZoneIdMapper">TimeZoneIdMapper</a></div><div class="desc docblock-short">A mapper between IANA time zone identifiers and BCP-47 time zone identifiers.</div></li><li><div class="item-name"><a class="struct" href="struct.TimeZoneIdMapperBorrowed.html" title="struct icu_timezone::TimeZoneIdMapperBorrowed">TimeZoneIdMapperBorrowed</a></div><div class="desc docblock-short">A borrowed wrapper around the time zone ID mapper, returned by
<a href="struct.TimeZoneIdMapper.html#method.as_borrowed" title="method icu_timezone::TimeZoneIdMapper::as_borrowed"><code>TimeZoneIdMapper::as_borrowed()</code></a>. More efficient to query.</div></li><li><div class="item-name"><a class="struct" href="struct.TimeZoneIdMapperWithFastCanonicalization.html" title="struct icu_timezone::TimeZoneIdMapperWithFastCanonicalization">TimeZoneIdMapperWithFastCanonicalization</a></div><div class="desc docblock-short">A mapper that supplements <a href="struct.TimeZoneIdMapper.html" title="struct icu_timezone::TimeZoneIdMapper"><code>TimeZoneIdMapper</code></a> with about 8 KB of additional data to
improve the performance of canonical IANA ID lookup.</div></li><li><div class="item-name"><a class="struct" href="struct.TimeZoneIdMapperWithFastCanonicalizationBorrowed.html" title="struct icu_timezone::TimeZoneIdMapperWithFastCanonicalizationBorrowed">TimeZoneIdMapperWithFastCanonicalizationBorrowed</a></div><div class="desc docblock-short">A borrowed wrapper around the time zone ID mapper, returned by
<a href="struct.TimeZoneIdMapperWithFastCanonicalization.html#method.as_borrowed" title="method icu_timezone::TimeZoneIdMapperWithFastCanonicalization::as_borrowed"><code>TimeZoneIdMapperWithFastCanonicalization::as_borrowed()</code></a>. More efficient to query.</div></li><li><div class="item-name"><a class="struct" href="struct.ZoneVariant.html" title="struct icu_timezone::ZoneVariant">ZoneVariant</a></div><div class="desc docblock-short">A time zone variant, representing the currently observed relative offset.
The semantics vary from time zone to time zone and could represent concepts
such as Standard time, Daylight time, Summer time, or Ramadan time.</div></li></ul><h2 id="enums" class="section-header">Enums<a href="#enums" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.TimeZoneError.html" title="enum icu_timezone::TimeZoneError">TimeZoneError</a></div><div class="desc docblock-short">A list of error outcomes for various operations in this module.</div></li></ul></section></div></main></body></html>