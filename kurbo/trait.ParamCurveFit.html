<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="The source curve for curve fitting."><title>ParamCurveFit in kurbo - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Bold-a2c9cd1067f8b328.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-fa3bb1812debf86c.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="kurbo" data-themes="" data-resource-suffix="" data-rustdoc-version="1.74.1 (a28077b28 2023-12-04)" data-channel="1.74.1" data-search-js="search-8be46b629f5f14a8.js" data-settings-js="settings-74424d7eec62a23e.js" ><script src="../static.files/storage-fec3eaa3851e447d.js"></script><script defer src="sidebar-items.js"></script><script defer src="../static.files/main-c5bd66d33317d69f.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-5d8b3c7633ad77ba.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../kurbo/index.html"><img class="rust-logo" src="../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a></nav><nav class="sidebar"><a class="logo-container" href="../kurbo/index.html"><img class="rust-logo" src="../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2 class="location"><a href="#">ParamCurveFit</a></h2><div class="sidebar-elems"><section><h3><a href="#required-methods">Required Methods</a></h3><ul class="block"><li><a href="#tymethod.break_cusp">break_cusp</a></li><li><a href="#tymethod.sample_pt_deriv">sample_pt_deriv</a></li><li><a href="#tymethod.sample_pt_tangent">sample_pt_tangent</a></li></ul><h3><a href="#provided-methods">Provided Methods</a></h3><ul class="block"><li><a href="#method.moment_integrals">moment_integrals</a></li></ul><h3><a href="#implementors">Implementors</a></h3></section><h2><a href="index.html">In kurbo</a></h2></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Trait <a href="index.html">kurbo</a>::<wbr><a class="trait" href="#">ParamCurveFit</a><button id="copy-path" title="Copy item path to clipboard"><img src="../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../src/kurbo/fit.rs.html#51-115">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><pre class="rust item-decl"><code>pub trait ParamCurveFit {
    // Required methods
    fn <a href="#tymethod.sample_pt_tangent" class="fn">sample_pt_tangent</a>(&amp;self, t: <a class="primitive" href="https://doc.rust-lang.org/1.74.1/std/primitive.f64.html">f64</a>, sign: <a class="primitive" href="https://doc.rust-lang.org/1.74.1/std/primitive.f64.html">f64</a>) -&gt; <a class="struct" href="struct.CurveFitSample.html" title="struct kurbo::CurveFitSample">CurveFitSample</a>;
<span class="item-spacer"></span>    fn <a href="#tymethod.sample_pt_deriv" class="fn">sample_pt_deriv</a>(&amp;self, t: <a class="primitive" href="https://doc.rust-lang.org/1.74.1/std/primitive.f64.html">f64</a>) -&gt; (<a class="struct" href="struct.Point.html" title="struct kurbo::Point">Point</a>, <a class="struct" href="struct.Vec2.html" title="struct kurbo::Vec2">Vec2</a>);
<span class="item-spacer"></span>    fn <a href="#tymethod.break_cusp" class="fn">break_cusp</a>(&amp;self, range: <a class="struct" href="https://doc.rust-lang.org/1.74.1/core/ops/range/struct.Range.html" title="struct core::ops::range::Range">Range</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.74.1/std/primitive.f64.html">f64</a>&gt;) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.74.1/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.74.1/std/primitive.f64.html">f64</a>&gt;;

    // Provided method
    fn <a href="#method.moment_integrals" class="fn">moment_integrals</a>(&amp;self, range: <a class="struct" href="https://doc.rust-lang.org/1.74.1/core/ops/range/struct.Range.html" title="struct core::ops::range::Range">Range</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.74.1/std/primitive.f64.html">f64</a>&gt;) -&gt; (<a class="primitive" href="https://doc.rust-lang.org/1.74.1/std/primitive.f64.html">f64</a>, <a class="primitive" href="https://doc.rust-lang.org/1.74.1/std/primitive.f64.html">f64</a>, <a class="primitive" href="https://doc.rust-lang.org/1.74.1/std/primitive.f64.html">f64</a>) { ... }
}</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>The source curve for curve fitting.</p>
<p>This trait is a general representation of curves to be used as input to a curve
fitting process. It can represent source curves with cusps and corners, though
if the corners are known in advance, it may be better to run curve fitting on
subcurves bounded by the corners.</p>
<p>The trait primarily works by sampling the source curve and computing the position
and derivative at each sample. Those derivatives are then used for multiple
sub-tasks, including ensuring G1 continuity at subdivision points, computing the
area and moment of the curve for curve fitting, and casting rays for evaluation
of a distance metric to test accuracy.</p>
<p>A major motivation is computation of offset curves, which often have cusps, but
the presence and location of those cusps is not generally known. It is also
intended for conversion between curve types (for example, piecewise Euler spiral
or NURBS), and distortion effects such as perspective transform.</p>
<p>Note general similarities to <a href="trait.ParamCurve.html" title="trait kurbo::ParamCurve"><code>ParamCurve</code></a> but also important differences.
Instead of separate <a href="trait.ParamCurve.html#tymethod.eval" title="method kurbo::ParamCurve::eval"><code>eval</code></a> and evaluation of derivative, have a single
<a href="trait.ParamCurveFit.html#tymethod.sample_pt_deriv" title="method kurbo::ParamCurveFit::sample_pt_deriv"><code>sample_pt_deriv</code></a> method which can be more efficient and also handles cusps more
robustly. Also there is no method for subsegment, as that is not needed and
would be annoying to implement.</p>
</div></details><h2 id="required-methods" class="small-section-header">Required Methods<a href="#required-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="tymethod.sample_pt_tangent" class="method"><a class="src rightside" href="../src/kurbo/fit.rs.html#60">source</a><h4 class="code-header">fn <a href="#tymethod.sample_pt_tangent" class="fn">sample_pt_tangent</a>(&amp;self, t: <a class="primitive" href="https://doc.rust-lang.org/1.74.1/std/primitive.f64.html">f64</a>, sign: <a class="primitive" href="https://doc.rust-lang.org/1.74.1/std/primitive.f64.html">f64</a>) -&gt; <a class="struct" href="struct.CurveFitSample.html" title="struct kurbo::CurveFitSample">CurveFitSample</a></h4></section></summary><div class="docblock"><p>Evaluate the curve and its tangent at parameter <code>t</code>.</p>
<p>For a regular curve (one not containing a cusp or corner), the
derivative is a good choice for the tangent vector and the <code>sign</code>
parameter can be ignored. Otherwise, the <code>sign</code> parameter selects which
side of the discontinuity the tangent will be sampled from.</p>
<p>Generally <code>t</code> is in the range [0..1].</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.sample_pt_deriv" class="method"><a class="src rightside" href="../src/kurbo/fit.rs.html#65">source</a><h4 class="code-header">fn <a href="#tymethod.sample_pt_deriv" class="fn">sample_pt_deriv</a>(&amp;self, t: <a class="primitive" href="https://doc.rust-lang.org/1.74.1/std/primitive.f64.html">f64</a>) -&gt; (<a class="struct" href="struct.Point.html" title="struct kurbo::Point">Point</a>, <a class="struct" href="struct.Vec2.html" title="struct kurbo::Vec2">Vec2</a>)</h4></section></summary><div class="docblock"><p>Evaluate the point and derivative at parameter <code>t</code>.</p>
<p>In curves with cusps, the derivative can go to zero.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.break_cusp" class="method"><a class="src rightside" href="../src/kurbo/fit.rs.html#114">source</a><h4 class="code-header">fn <a href="#tymethod.break_cusp" class="fn">break_cusp</a>(&amp;self, range: <a class="struct" href="https://doc.rust-lang.org/1.74.1/core/ops/range/struct.Range.html" title="struct core::ops::range::Range">Range</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.74.1/std/primitive.f64.html">f64</a>&gt;) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.74.1/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.74.1/std/primitive.f64.html">f64</a>&gt;</h4></section></summary><div class="docblock"><p>Find a cusp or corner within the given range.</p>
<p>If the range contains a corner or cusp, return it. If there is more
than one such discontinuity, any can be reported, as the function will
be called repeatedly after subdivision of the range.</p>
<p>Do not report cusps at the endpoints of the range, as this may cause
potentially infinite subdivision. In particular, when a cusp is reported
and this method is called on a subdivided range bounded by the reported
cusp, then the subsequent call should not report a cusp there.</p>
<p>The definition of what exactly constitutes a cusp is somewhat loose.
If a cusp is missed, then the curve fitting algorithm will attempt to
fit the curve with a smooth curve, which is generally not a disaster
will usually result in more subdivision. Conversely, it might be useful
to report near-cusps, specifically points of curvature maxima where the
curvature is large but still mathematically finite.</p>
</div></details></div><h2 id="provided-methods" class="small-section-header">Provided Methods<a href="#provided-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="method.moment_integrals" class="method"><a class="src rightside" href="../src/kurbo/fit.rs.html#78-95">source</a><h4 class="code-header">fn <a href="#method.moment_integrals" class="fn">moment_integrals</a>(&amp;self, range: <a class="struct" href="https://doc.rust-lang.org/1.74.1/core/ops/range/struct.Range.html" title="struct core::ops::range::Range">Range</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.74.1/std/primitive.f64.html">f64</a>&gt;) -&gt; (<a class="primitive" href="https://doc.rust-lang.org/1.74.1/std/primitive.f64.html">f64</a>, <a class="primitive" href="https://doc.rust-lang.org/1.74.1/std/primitive.f64.html">f64</a>, <a class="primitive" href="https://doc.rust-lang.org/1.74.1/std/primitive.f64.html">f64</a>)</h4></section></summary><div class="docblock"><p>Compute moment integrals.</p>
<p>This method computes the integrals of y dx, x y dx, and y^2 dx over the
length of this curve. From these integrals it is fairly straightforward
to derive the moments needed for curve fitting.</p>
<p>A default implementation is proved which does quadrature integration
with Green’s theorem, in terms of samples evaulated with
<a href="trait.ParamCurveFit.html#tymethod.sample_pt_deriv" title="method kurbo::ParamCurveFit::sample_pt_deriv"><code>sample_pt_deriv</code></a>.</p>
</div></details></div><h2 id="implementors" class="small-section-header">Implementors<a href="#implementors" class="anchor">§</a></h2><div id="implementors-list"><section id="impl-ParamCurveFit-for-CubicOffset" class="impl"><a class="src rightside" href="../src/kurbo/offset.rs.html#108-160">source</a><a href="#impl-ParamCurveFit-for-CubicOffset" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="trait.ParamCurveFit.html" title="trait kurbo::ParamCurveFit">ParamCurveFit</a> for <a class="struct" href="offset/struct.CubicOffset.html" title="struct kurbo::offset::CubicOffset">CubicOffset</a></h3></section><section id="impl-ParamCurveFit-for-SimplifyBezPath" class="impl"><a class="src rightside" href="../src/kurbo/simplify.rs.html#190-240">source</a><a href="#impl-ParamCurveFit-for-SimplifyBezPath" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="trait.ParamCurveFit.html" title="trait kurbo::ParamCurveFit">ParamCurveFit</a> for <a class="struct" href="simplify/struct.SimplifyBezPath.html" title="struct kurbo::simplify::SimplifyBezPath">SimplifyBezPath</a></h3></section></div><script src="../implementors/kurbo/fit/trait.ParamCurveFit.js" async></script></section></div></main></body></html>