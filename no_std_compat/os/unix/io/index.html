<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Unix-specific extensions to general I/O primitives."><meta name="keywords" content="rust, rustlang, rust-lang, io"><title>no_std_compat::os::unix::io - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" type="text/css" href="../../../../normalize.css"><link rel="stylesheet" type="text/css" href="../../../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../../../ayu.css" disabled><link rel="stylesheet" type="text/css" href="../../../../dark.css" disabled><link rel="stylesheet" type="text/css" href="../../../../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../../../../storage.js"></script><script src="../../../../crates.js"></script><script defer src="../../../../main.js"></script>
    <noscript><link rel="stylesheet" href="../../../../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../../../../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../../../../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../../../../favicon.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../../../../no_std_compat/index.html"><div class="logo-container"><img class="rust-logo" src="../../../../rust-logo.svg" alt="logo"></div>
        </a><h2 class="location"></h2>
    </nav>
    <nav class="sidebar"><a class="sidebar-logo" href="../../../../no_std_compat/index.html"><div class="logo-container"><img class="rust-logo" src="../../../../rust-logo.svg" alt="logo"></div>
        </a><h2 class="location"><a href="#">Module io</a></h2><div class="sidebar-elems"><section><div class="block"><ul><li><a href="#structs">Structs</a></li><li><a href="#traits">Traits</a></li><li><a href="#types">Type Definitions</a></li></ul></div></section><div id="sidebar-vars" data-name="io" data-ty="mod" data-relpath="./"></div><script defer src="./sidebar-items.js"></script></div></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../../../../no_std_compat/index.html"><img class="rust-logo" src="../../../../rust-logo.svg" alt="logo"></a><nav class="sub"><div class="theme-picker hidden"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="22" height="22" alt="Pick another theme!" src="../../../../brush.svg"></button><div id="theme-choices" role="menu"></div></div><form class="search-form"><div class="search-container"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../../../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../../../wheel.svg"></a></div></form></nav></div><section id="main-content" class="content"><div class="main-heading">
    <h1 class="fqn"><span class="in-band">Module <a href="../../../index.html">no_std_compat</a>::<wbr><a href="../../index.html">os</a>::<wbr><a href="../index.html">unix</a>::<wbr><a class="mod" href="#">io</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../../../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span></h1><span class="out-of-band"><span class="since" title="Stable since Rust version 1.0.0">1.0.0</span> · <a class="srclink" href="https://doc.rust-lang.org/1.60.0/src/std/os/unix/mod.rs.html#76">source</a> · <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span></div><div class="item-info"><div class="stab portability">This is supported on <strong>Unix</strong> only.</div></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Unix-specific extensions to general I/O primitives.</p>
<p>Just like raw pointers, raw file descriptors point to resources with
dynamic lifetimes, and they can dangle if they outlive their resources
or be forged if they’re created from invalid values.</p>
<p>This module provides three types for representing file descriptors,
with different ownership properties: raw, borrowed, and owned, which are
analogous to types used for representing pointers:</p>
<div><table><thead><tr><th>Type</th><th>Analogous to</th></tr></thead><tbody>
<tr><td><a href="../prelude/type.RawFd.html" title="RawFd"><code>RawFd</code></a></td><td><code>*const _</code></td></tr>
<tr><td><a href="../prelude/struct.BorrowedFd.html"><code>BorrowedFd&lt;'a&gt;</code></a></td><td><code>&amp;'a _</code></td></tr>
<tr><td><a href="../prelude/struct.OwnedFd.html" title="OwnedFd"><code>OwnedFd</code></a></td><td><code>Box&lt;_&gt;</code></td></tr>
</tbody></table>
</div>
<p>Like raw pointers, <code>RawFd</code> values are primitive values. And in new code,
they should be considered unsafe to do I/O on (analogous to dereferencing
them). Rust did not always provide this guidance, so existing code in the
Rust ecosystem often doesn’t mark <code>RawFd</code> usage as unsafe. Once the
<code>io_safety</code> feature is stable, libraries will be encouraged to migrate,
either by adding <code>unsafe</code> to APIs that dereference <code>RawFd</code> values, or by
using to <code>BorrowedFd</code> or <code>OwnedFd</code> instead.</p>
<p>Like references, <code>BorrowedFd</code> values are tied to a lifetime, to ensure
that they don’t outlive the resource they point to. These are safe to
use. <code>BorrowedFd</code> values may be used in APIs which provide safe access to
any system call except for:</p>
<ul>
<li><code>close</code>, because that would end the dynamic lifetime of the resource
without ending the lifetime of the file descriptor.</li>
<li><code>dup2</code>/<code>dup3</code>, in the second argument, because this argument is
closed and assigned a new resource, which may break the assumptions
other code using that file descriptor.
This list doesn’t include <code>mmap</code>, since <code>mmap</code> does do a proper borrow of
its file descriptor argument. That said, <code>mmap</code> is unsafe for other
reasons: it operates on raw pointers, and it can have undefined behavior if
the underlying storage is mutated. Mutations may come from other processes,
or from the same process if the API provides <code>BorrowedFd</code> access, since as
mentioned earlier, <code>BorrowedFd</code> values may be used in APIs which provide
safe access to any system call. Consequently, code using <code>mmap</code> and
presenting a safe API must take full responsibility for ensuring that safe
Rust code cannot evoke undefined behavior through it.</li>
</ul>
<p>Like boxes, <code>OwnedFd</code> values conceptually own the resource they point to,
and free (close) it when they are dropped.</p>
</div></details><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left unstable module-item"><a class="struct" href="struct.BorrowedFd.html" title="no_std_compat::os::unix::io::BorrowedFd struct">BorrowedFd</a><span class="stab unstable" title="">Experimental</span></div><div class="item-right docblock-short"><p>A borrowed file descriptor.</p>
</div></div><div class="item-row"><div class="item-left unstable module-item"><a class="struct" href="struct.OwnedFd.html" title="no_std_compat::os::unix::io::OwnedFd struct">OwnedFd</a><span class="stab unstable" title="">Experimental</span></div><div class="item-right docblock-short"><p>An owned file descriptor.</p>
</div></div></div><h2 id="traits" class="small-section-header"><a href="#traits">Traits</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left unstable module-item"><a class="trait" href="trait.AsFd.html" title="no_std_compat::os::unix::io::AsFd trait">AsFd</a><span class="stab unstable" title="">Experimental</span></div><div class="item-right docblock-short"><p>A trait to borrow the file descriptor from an underlying object.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.AsRawFd.html" title="no_std_compat::os::unix::io::AsRawFd trait">AsRawFd</a></div><div class="item-right docblock-short"><p>A trait to extract the raw file descriptor from an underlying object.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.FromRawFd.html" title="no_std_compat::os::unix::io::FromRawFd trait">FromRawFd</a></div><div class="item-right docblock-short"><p>A trait to express the ability to construct an object from a raw file
descriptor.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.IntoRawFd.html" title="no_std_compat::os::unix::io::IntoRawFd trait">IntoRawFd</a></div><div class="item-right docblock-short"><p>A trait to express the ability to consume an object and acquire ownership of
its raw file descriptor.</p>
</div></div></div><h2 id="types" class="small-section-header"><a href="#types">Type Definitions</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="type" href="type.RawFd.html" title="no_std_compat::os::unix::io::RawFd type">RawFd</a></div><div class="item-right docblock-short"><p>Raw file descriptors.</p>
</div></div></div></section><section id="search" class="content hidden"></section></div></main><div id="rustdoc-vars" data-root-path="../../../../" data-current-crate="no_std_compat" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.60.0 (7737e0b5c 2022-04-04)" ></div>
</body></html>