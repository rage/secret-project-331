<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="The Rust OpenTelemetry implementation."><meta name="keywords" content="rust, rustlang, rust-lang, opentelemetry"><title>opentelemetry - Rust</title><link rel="stylesheet" type="text/css" href="../normalize.css"><link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../light.css"  id="themeStyle"><link rel="stylesheet" type="text/css" href="../dark.css" disabled ><link rel="stylesheet" type="text/css" href="../ayu.css" disabled ><script id="default-settings"></script><script src="../storage.js"></script><script src="../crates.js"></script><noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="icon" type="image/svg+xml" href="../favicon.svg">
<link rel="alternate icon" type="image/png" href="../favicon-16x16.png">
<link rel="alternate icon" type="image/png" href="../favicon-32x32.png"><style type="text/css">#crate-search{background-image:url("../down-arrow.svg");}</style></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu" role="button">&#9776;</div><a href='../opentelemetry/index.html'><div class='logo-container'><img src='https://raw.githubusercontent.com/open-telemetry/opentelemetry-rust/main/assets/logo.svg' alt='logo'></div></a><p class="location">Crate opentelemetry</p><div class="block version"><p>Version 0.13.0</p></div><div class="sidebar-elems"><a id="all-types" href="all.html"><p>See all opentelemetry's items</p></a><div class="block items"><ul><li><a href="#modules">Modules</a></li><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li></ul></div><p class="location"></p><div id="sidebar-vars" data-name="opentelemetry" data-ty="mod" data-relpath="../"></div><script defer src="../sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu"><img src="../brush.svg" width="18" height="18" alt="Pick another theme!"></button><div id="theme-choices" role="menu"></div></div><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" class="help-button">?</button>
                <a id="settings-menu" href="../settings.html"><img src="../wheel.svg" width="18" height="18" alt="Change settings"></a></div></form></nav><section id="main" class="content"><h1 class="fqn"><span class="in-band">Crate <a class="mod" href="">opentelemetry</a><button id="copy-path" onclick="copy_path(this)">⎘</button></span><span class="out-of-band"><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../src/opentelemetry/lib.rs.html#1-223" title="goto source code">[src]</a></span></h1><div class="docblock"><p>The Rust <a href="https://opentelemetry.io/">OpenTelemetry</a> implementation.</p>
<p>OpenTelemetry provides a single set of APIs, libraries, agents, and collector
services to capture distributed traces and metrics from your application. You
can analyze them using <a href="https://prometheus.io">Prometheus</a>, <a href="https://www.jaegertracing.io">Jaeger</a>, and other observability tools.</p>
<p><em>Compiler support: <a href="#supported-rust-versions">requires <code>rustc</code> 1.46+</a></em></p>
<h2 id="getting-started" class="section-header"><a href="#getting-started">Getting Started</a></h2>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">opentelemetry</span>::{<span class="ident">sdk::export::trace::stdout</span>, <span class="ident">trace::Tracer</span>, <span class="ident">global</span>};

<span class="kw">fn</span> <span class="ident">main</span>() <span class="op">-</span><span class="op">&gt;</span> <span class="prelude-ty">Result</span><span class="op">&lt;</span>(), <span class="ident">Box</span><span class="op">&lt;</span><span class="kw">dyn</span> <span class="ident">std::error::Error</span> <span class="op">+</span> <span class="ident">Send</span> <span class="op">+</span> <span class="ident">Sync</span> <span class="op">+</span> <span class="lifetime">&#39;static</span><span class="op">&gt;</span><span class="op">&gt;</span> {
    <span class="comment">// Create a new instrumentation pipeline</span>
    <span class="kw">let</span> <span class="ident">tracer</span> <span class="op">=</span> <span class="ident">stdout::new_pipeline</span>().<span class="ident">install_simple</span>();

    <span class="ident">tracer</span>.<span class="ident">in_span</span>(<span class="string">&quot;doing_work&quot;</span>, <span class="op">|</span><span class="ident">cx</span><span class="op">|</span> {
        <span class="comment">// Traced app logic here...</span>
    });

    <span class="ident">global::shutdown_tracer_provider</span>(); <span class="comment">// sending remaining spans</span>

    <span class="prelude-val">Ok</span>(())
}
}</pre></div>
<p>See the <a href="https://github.com/open-telemetry/opentelemetry-rust/tree/main/examples">examples</a>
directory for different integration patterns.</p>
<h2 id="crate-feature-flags" class="section-header"><a href="#crate-feature-flags">Crate Feature Flags</a></h2>
<p>The following core crate feature flags are available:</p>
<ul>
<li><code>trace</code>: Includes the trace API and SDK (enabled by default).</li>
<li><code>metrics</code>: Includes the unstable metrics API and SDK.</li>
<li><code>serialize</code>: Adds <a href="https://crates.io/crates/serde">serde</a> serializers for common types.</li>
</ul>
<p>Support for recording and exporting telemetry asynchronously can be added
via the following flags:</p>
<ul>
<li><code>rt-tokio</code>: Spawn telemetry tasks using <a href="https://crates.io/crates/tokio">tokio</a>’s multi-thread runtime.</li>
<li><code>rt-tokio-current-thread</code>: Spawn telemetry tasks on a separate runtime so that the main runtime won’t be blocked.</li>
<li><code>rt-async-std</code>: Spawn telemetry tasks using <a href="https://crates.io/crates/async-std">async-std</a>’s runtime.</li>
</ul>
<h2 id="working-with-runtimes" class="section-header"><a href="#working-with-runtimes">Working with runtimes</a></h2>
<p>Opentelemetry API &amp; SDK supports different runtimes. When working with async runtime, we recommend
to use batch span processors where the spans will be sent in batch, reducing the number of requests
and resource needed.</p>
<p>Batch span processors need to run a background task to collect and send spans. Different runtime
needs different ways to handle the background task.</p>
<h3 id="tokio" class="section-header"><a href="#tokio">Tokio</a></h3>
<p>Tokio currently offers two different schedulers. One is <code>current_thread_scheduler</code>, the other is
<code>multiple_thread_scheduler</code>. Both of them default to use batch span processors to install span exporters.</p>
<p>But for <code>current_thread_scheduler</code>. It can cause the program to hang forever if we schedule the backgroud
task with other tasks in the same runtime. Thus, users should enable <code>rt-tokio-current-thread</code> feature
to ask the background task be scheduled on a different runtime on a different thread.</p>
<h2 id="related-crates" class="section-header"><a href="#related-crates">Related Crates</a></h2>
<p>In addition to <code>opentelemetry</code>, the <a href="https://github.com/open-telemetry/opentelemetry-rust"><code>open-telemetry/opentelemetry-rust</code></a>
repository contains several additional crates designed to be used with the
<code>opentelemetry</code> ecosystem. This includes a collection of trace
<code>SpanExporter</code> and metrics pull and push controller implementations, as well
as utility and adapter crates to assist in propagating state and
instrumenting applications.</p>
<p>In particular, the following crates are likely to be of interest:</p>
<ul>
<li><a href="https://crates.io/crates/opentelemetry-http"><code>opentelemetry-http</code></a> provides a pipeline and exporter for sending
trace information to <a href="https://crates.io/crates/http"><code>http</code></a>.</li>
<li><a href="https://crates.io/crates/opentelemetry-jaeger"><code>opentelemetry-jaeger</code></a> provides a pipeline and exporter for sending
trace information to <a href="https://www.jaegertracing.io"><code>Jaeger</code></a>.</li>
<li><a href="https://crates.io/crates/opentelemetry-otlp"><code>opentelemetry-otlp</code></a> exporter for sending trace and metric data in the
OTLP format to the OpenTelemetry collector.</li>
<li><a href="https://crates.io/crates/opentelemetry-prometheus"><code>opentelemetry-prometheus</code></a> provides a pipeline and exporter for sending
metrics information to <a href="https://prometheus.io"><code>Prometheus</code></a>.</li>
<li><a href="https://crates.io/crates/opentelemetry-zipkin"><code>opentelemetry-zipkin</code></a> provides a pipeline and exporter for sending
trace information to <a href="https://zipkin.io"><code>Zipkin</code></a>.</li>
<li><a href="https://crates.io/crates/opentelemetry-datadog"><code>opentelemetry-datadog</code></a> provides additional exporters to <a href="https://www.datadoghq.com"><code>Datadog</code></a>.</li>
<li><a href="https://crates.io/crates/opentelemetry-aws"><code>opentelemetry-aws</code></a> provides unofficial propagators for AWS X-ray.</li>
<li><a href="https://crates.io/crates/opentelemetry-contrib"><code>opentelemetry-contrib</code></a> provides additional exporters and propagators that are experimental.</li>
<li><a href="https://crates.io/crates/opentelemetry-semantic-conventions"><code>opentelemetry-semantic-conventions</code></a> provides standard names and
semantic otel conventions.</li>
</ul>
<p>Additionally, there are also several third-party crates which are not
maintained by the <code>opentelemetry</code> project. These include:</p>
<ul>
<li><a href="https://crates.io/crates/tracing-opentelemetry"><code>tracing-opentelemetry</code></a> provides integration for applications
instrumented using the <a href="https://crates.io/crates/tracing"><code>tracing</code></a> API and ecosystem.</li>
<li><a href="https://crates.io/crates/actix-web-opentelemetry"><code>actix-web-opentelemetry</code></a> provides integration for the <a href="https://crates.io/crates/actix-web"><code>actix-web</code></a> web
server and ecosystem.</li>
<li><a href="https://crates.io/crates/opentelemetry-application-insights"><code>opentelemetry-application-insights</code></a> provides an unofficial <a href="https://docs.microsoft.com/en-us/azure/azure-monitor/app/app-insights-overview">Azure
Application Insights</a> exporter.</li>
<li><a href="https://crates.io/crates/opentelemetry-tide"><code>opentelemetry-tide</code></a> provides integration for the <a href="https://crates.io/crates/tide"><code>Tide</code></a> web server
and ecosystem.</li>
<li><a href="https://crates.io/crates/opentelemetry-stackdriver"><code>opentelemetry-stackdriver</code></a> provides an exporter for Google’s <a href="https://cloud.google.com/trace/">Cloud Trace</a>
(which used to be called StackDriver).</li>
</ul>
<p>If you’re the maintainer of an <code>opentelemetry</code> ecosystem crate not listed
above, please let us know! We’d love to add your project to the list!</p>
<h2 id="supported-rust-versions" class="section-header"><a href="#supported-rust-versions">Supported Rust Versions</a></h2>
<p>OpenTelemetry is built against the latest stable release. The minimum
supported version is 1.46. The current OpenTelemetry version is not
guaranteed to build on Rust versions earlier than the minimum supported
version.</p>
<p>The current stable Rust compiler and the three most recent minor versions
before it will always be supported. For example, if the current stable
compiler version is 1.49, the minimum supported version will not be
increased past 1.46, three minor versions prior. Increasing the minimum
supported compiler version is not considered a semver breaking change as
long as doing so complies with this policy.</p>
</div><h2 id="modules" class="section-header"><a href="#modules">Modules</a></h2>
<table><tr class="module-item"><td><a class="mod" href="baggage/index.html" title="opentelemetry::baggage mod">baggage</a></td><td class="docblock-short"><p>Primitives for sending name-value data across system boundaries.</p>
</td></tr><tr class="module-item"><td><a class="mod" href="global/index.html" title="opentelemetry::global mod">global</a></td><td class="docblock-short"><p>Utilities for working with global telemetry primitives</p>
</td></tr><tr class="module-item"><td><a class="mod" href="propagation/index.html" title="opentelemetry::propagation mod">propagation</a></td><td class="docblock-short"><p>OpenTelemetry Propagator interface</p>
</td></tr><tr class="module-item"><td><a class="mod" href="runtime/index.html" title="opentelemetry::runtime mod">runtime</a></td><td class="docblock-short"><p>Provides an abstraction of several async runtimes</p>
</td></tr><tr class="module-item"><td><a class="mod" href="sdk/index.html" title="opentelemetry::sdk mod">sdk</a></td><td class="docblock-short"><p>OpenTelemetry SDK</p>
</td></tr><tr class="module-item"><td><a class="mod" href="trace/index.html" title="opentelemetry::trace mod">trace</a></td><td class="docblock-short"><p>OpenTelemetry Tracing API.</p>
</td></tr><tr class="module-item"><td><a class="mod" href="util/index.html" title="opentelemetry::util mod">util</a></td><td class="docblock-short"><p>Internal utilities</p>
</td></tr></table><h2 id="structs" class="section-header"><a href="#structs">Structs</a></h2>
<table><tr class="module-item"><td><a class="struct" href="struct.Context.html" title="opentelemetry::Context struct">Context</a></td><td class="docblock-short"><p>An execution-scoped collection of values.</p>
</td></tr><tr class="module-item"><td><a class="struct" href="struct.ContextGuard.html" title="opentelemetry::ContextGuard struct">ContextGuard</a></td><td class="docblock-short"><p>A guard that resets the current context to the prior context when dropped.</p>
</td></tr><tr class="module-item"><td><a class="struct" href="struct.Key.html" title="opentelemetry::Key struct">Key</a></td><td class="docblock-short"><p>Key used for metric <code>LabelSet</code>s and trace <code>Span</code> attributes.</p>
</td></tr><tr class="module-item"><td><a class="struct" href="struct.KeyValue.html" title="opentelemetry::KeyValue struct">KeyValue</a></td><td class="docblock-short"><p><code>KeyValue</code> pairs are used by <code>LabelSet</code>s and <code>Span</code> attributes.</p>
</td></tr><tr class="module-item"><td><a class="struct" href="struct.Unit.html" title="opentelemetry::Unit struct">Unit</a></td><td class="docblock-short"><p>Units denote underlying data units tracked by <code>Meter</code>s.</p>
</td></tr></table><h2 id="enums" class="section-header"><a href="#enums">Enums</a></h2>
<table><tr class="module-item"><td><a class="enum" href="enum.Array.html" title="opentelemetry::Array enum">Array</a></td><td class="docblock-short"><p>Array of homogeneous values</p>
</td></tr><tr class="module-item"><td><a class="enum" href="enum.Value.html" title="opentelemetry::Value enum">Value</a></td><td class="docblock-short"><p>Value types for use in <code>KeyValue</code> pairs.</p>
</td></tr></table></section><section id="search" class="content hidden"></section><div id="rustdoc-vars" data-root-path="../" data-current-crate="opentelemetry" data-search-index-js="../search-index.js" data-search-js="../search.js"></div>
    <script src="../main.js"></script></body></html>