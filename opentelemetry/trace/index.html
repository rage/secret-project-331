<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="OpenTelemetry Tracing API."><meta name="keywords" content="rust, rustlang, rust-lang, trace"><title>opentelemetry::trace - Rust</title><link rel="stylesheet" type="text/css" href="../../normalize.css"><link rel="stylesheet" type="text/css" href="../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../light.css"  id="themeStyle"><link rel="stylesheet" type="text/css" href="../../dark.css" disabled ><link rel="stylesheet" type="text/css" href="../../ayu.css" disabled ><script id="default-settings"></script><script src="../../storage.js"></script><script src="../../crates.js"></script><noscript><link rel="stylesheet" href="../../noscript.css"></noscript><link rel="icon" type="image/svg+xml" href="../../favicon.svg">
<link rel="alternate icon" type="image/png" href="../../favicon-16x16.png">
<link rel="alternate icon" type="image/png" href="../../favicon-32x32.png"><style type="text/css">#crate-search{background-image:url("../../down-arrow.svg");}</style></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu" role="button">&#9776;</div><a href='../../opentelemetry/index.html'><div class='logo-container'><img src='https://raw.githubusercontent.com/open-telemetry/opentelemetry-rust/main/assets/logo.svg' alt='logo'></div></a><p class="location">Module trace</p><div class="sidebar-elems"><div class="block items"><ul><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#constants">Constants</a></li><li><a href="#traits">Traits</a></li><li><a href="#functions">Functions</a></li><li><a href="#types">Type Definitions</a></li></ul></div><p class="location"><a href="../index.html">opentelemetry</a></p><div id="sidebar-vars" data-name="trace" data-ty="mod" data-relpath="../"></div><script defer src="../sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu"><img src="../../brush.svg" width="18" height="18" alt="Pick another theme!"></button><div id="theme-choices" role="menu"></div></div><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" class="help-button">?</button>
                <a id="settings-menu" href="../../settings.html"><img src="../../wheel.svg" width="18" height="18" alt="Change settings"></a></div></form></nav><section id="main" class="content"><h1 class="fqn"><span class="in-band">Module <a href="../index.html">opentelemetry</a>::<wbr><a class="mod" href="">trace</a><button id="copy-path" onclick="copy_path(this)">⎘</button></span><span class="out-of-band"><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../../src/opentelemetry/trace/mod.rs.html#1-201" title="goto source code">[src]</a></span></h1><div class="docblock"><h1 id="opentelemetry-tracing-api" class="section-header"><a href="#opentelemetry-tracing-api">OpenTelemetry Tracing API.</a></h1>
<p>The tracing API consists of a few main traits:</p>
<ul>
<li>The <code>Tracer</code> trait which describes all tracing operations.</li>
<li>The <code>Span</code> trait with is a mutable object storing information about the
current operation execution.</li>
<li>The <code>SpanContext</code> struct is the portion of a <code>Span</code> which must be
serialized and propagated along side of a distributed context</li>
</ul>
<h2 id="tracer" class="section-header"><a href="#tracer">Tracer</a></h2>
<p>The OpenTelemetry library achieves in-process context propagation of <code>Span</code>s by
way of the <code>Tracer</code>.</p>
<p>The <code>Tracer</code> is responsible for tracking the currently active <code>Span</code>, and
exposes methods for creating and activating new <code>Span</code>s. The <code>Tracer</code> is
configured with <code>Propagator</code>s which support transferring span context across
process boundaries.</p>
<p><code>Tracer</code>s are generally expected to be used as singletons. Implementations
SHOULD provide a single global default <code>Tracer</code>.</p>
<p>Some applications may require multiple <code>Tracer</code> instances, e.g. to create
<code>Span</code>s on behalf of other applications. Implementations MAY provide a global
registry of <code>Tracer</code>s for such applications.</p>
<h2 id="span" class="section-header"><a href="#span">Span</a></h2>
<p>A <code>Span</code> represents a single operation within a trace. Spans can be nested to
form a trace tree. Each trace contains a root span, which typically describes
the end-to-end latency and, optionally, one or more sub-spans for its
sub-operations.</p>
<p><code>Span</code>s encapsulate:</p>
<ul>
<li>The span name</li>
<li>An immutable <code>SpanContext</code> that uniquely identifies the <code>Span</code></li>
<li>A parent span in the form of a <code>SpanContext</code>, or None</li>
<li>A start timestamp</li>
<li>An end timestamp</li>
<li>An ordered mapping of <code>Attribute</code>s</li>
<li>A list of <code>Link</code>s to other <code>Span</code>s</li>
<li>A list of timestamped <code>Event</code>s</li>
<li>A <code>Status</code>.</li>
</ul>
<p>The <em>span name</em> is a human-readable string which concisely identifies the work
represented by the <code>Span</code>, for example, an RPC method name, a function name,
or the name of a subtask or stage within a larger computation. The span name
should be the most general string that identifies a (statistically) interesting
<em>class of Spans</em>, rather than individual Span instances. That is, “get_user” is
a reasonable name, while “get_user/314159”, where “314159” is a user ID, is not
a good name due to its high cardinality.</p>
<p>For example, here are potential span names for an endpoint that gets a
hypothetical account information:</p>
<table><thead><tr><th>Span Name</th><th>Guidance</th></tr></thead><tbody>
<tr><td><code>get</code></td><td>Too general</td></tr>
<tr><td><code>get_account/42</code></td><td>Too specific</td></tr>
<tr><td><code>get_account</code></td><td>Good, and account_id=42 would make a nice Span attribute</td></tr>
<tr><td><code>get_account/{accountId}</code></td><td>Also good (using the “HTTP route”)</td></tr>
</tbody></table>
<p>The <code>Span</code>’s start and end timestamps reflect the elapsed real time of the
operation. A <code>Span</code>’s start time SHOULD be set to the current time on span
creation. After the <code>Span</code> is created, it SHOULD be possible to
change the its name, set its <code>Attribute</code>s, and add <code>Link</code>s and <code>Event</code>s. These
MUST NOT be changed after the <code>Span</code>’s end time has been set.</p>
<p><code>Span</code>s are not meant to be used to propagate information within a process. To
prevent misuse, implementations SHOULD NOT provide access to a <code>Span</code>’s
attributes besides its <code>SpanContext</code>.</p>
<p>Vendors may implement the <code>Span</code> interface to effect vendor-specific logic.
However, alternative implementations MUST NOT allow callers to create <code>Span</code>s
directly. All <code>Span</code>s MUST be created via a <code>Tracer</code>.</p>
<h2 id="spancontext" class="section-header"><a href="#spancontext">SpanContext</a></h2>
<p>A <code>SpanContext</code> represents the portion of a <code>Span</code> which must be serialized and
propagated along side of a distributed context. <code>SpanContext</code>s are immutable.
<code>SpanContext</code>.</p>
<p>The OpenTelemetry <code>SpanContext</code> representation conforms to the <a href="https://www.w3.org/TR/trace-context/">w3c TraceContext
specification</a>. It contains two
identifiers - a <code>TraceId</code> and a <code>SpanId</code> - along with a set of common
<code>TraceFlags</code> and system-specific <code>TraceState</code> values.</p>
<p><code>TraceId</code> A valid trace identifier is a non-zero <code>u128</code></p>
<p><code>SpanId</code> A valid span identifier is a non-zero <code>u64</code> byte.</p>
<p><code>TraceFlags</code> contain details about the trace. Unlike Tracestate values,
TraceFlags are present in all traces. Currently, the only <code>TraceFlags</code> is a
boolean <code>sampled</code>
<a href="https://www.w3.org/TR/trace-context/#trace-flags">flag</a>.</p>
<p><code>Tracestate</code> carries system-specific configuration data, represented as a list
of key-value pairs. TraceState allows multiple tracing systems to participate in
the same trace.</p>
<p><code>IsValid</code> is a boolean flag which returns true if the SpanContext has a non-zero
TraceID and a non-zero SpanID.</p>
<p><code>IsRemote</code> is a boolean flag which returns true if the SpanContext was propagated
from a remote parent. When creating children from remote spans, their IsRemote
flag MUST be set to false.</p>
<p>Please review the W3C specification for details on the <a href="https://www.w3.org/TR/trace-context/#tracestate-field">Tracestate
field</a>.</p>
</div><h2 id="structs" class="section-header"><a href="#structs">Structs</a></h2>
<table><tr class="module-item"><td><a class="struct" href="struct.Event.html" title="opentelemetry::trace::Event struct">Event</a></td><td class="docblock-short"><p>A <code>Span</code> has the ability to add events. Events have a time associated
with the moment when they are added to the <code>Span</code>.</p>
</td></tr><tr class="module-item"><td><a class="struct" href="struct.Link.html" title="opentelemetry::trace::Link struct">Link</a></td><td class="docblock-short"><p>During the <code>Span</code> creation user MUST have the ability to record links to other <code>Span</code>s. Linked
<code>Span</code>s can be from the same or a different trace.</p>
</td></tr><tr class="module-item"><td><a class="struct" href="struct.NoopSpan.html" title="opentelemetry::trace::NoopSpan struct">NoopSpan</a></td><td class="docblock-short"><p>A no-op instance of a <code>Span</code>.</p>
</td></tr><tr class="module-item"><td><a class="struct" href="struct.NoopSpanExporter.html" title="opentelemetry::trace::NoopSpanExporter struct">NoopSpanExporter</a></td><td class="docblock-short"><p>A no-op instance of an <a href="../sdk/export/trace/trait.SpanExporter.html"><code>SpanExporter</code></a>.</p>
</td></tr><tr class="module-item"><td><a class="struct" href="struct.NoopTracer.html" title="opentelemetry::trace::NoopTracer struct">NoopTracer</a></td><td class="docblock-short"><p>A no-op instance of a <code>Tracer</code>.</p>
</td></tr><tr class="module-item"><td><a class="struct" href="struct.NoopTracerProvider.html" title="opentelemetry::trace::NoopTracerProvider struct">NoopTracerProvider</a></td><td class="docblock-short"><p>A no-op instance of a <code>TracerProvider</code>.</p>
</td></tr><tr class="module-item"><td><a class="struct" href="struct.SpanBuilder.html" title="opentelemetry::trace::SpanBuilder struct">SpanBuilder</a></td><td class="docblock-short"><p><code>SpanBuilder</code> allows span attributes to be configured before the span
has started.</p>
</td></tr><tr class="module-item"><td><a class="struct" href="struct.SpanContext.html" title="opentelemetry::trace::SpanContext struct">SpanContext</a></td><td class="docblock-short"><p>Immutable portion of a <code>Span</code> which can be serialized and propagated.</p>
</td></tr><tr class="module-item"><td><a class="struct" href="struct.SpanId.html" title="opentelemetry::trace::SpanId struct">SpanId</a></td><td class="docblock-short"><p>SpanId is an 8-byte value which uniquely identifies a given span within a trace
The actual <code>u64</code> value is wrapped in a tuple struct in order to leverage the newtype pattern</p>
</td></tr><tr class="module-item"><td><a class="struct" href="struct.TraceId.html" title="opentelemetry::trace::TraceId struct">TraceId</a></td><td class="docblock-short"><p>TraceId is an 16-byte value which uniquely identifies a given trace
The actual <code>u128</code> value is wrapped in a tuple struct in order to leverage the newtype pattern</p>
</td></tr><tr class="module-item"><td><a class="struct" href="struct.TraceState.html" title="opentelemetry::trace::TraceState struct">TraceState</a></td><td class="docblock-short"><p>TraceState carries system-specific configuration data, represented as a list
of key-value pairs. TraceState allows multiple tracing systems to
participate in the same trace.</p>
</td></tr></table><h2 id="enums" class="section-header"><a href="#enums">Enums</a></h2>
<table><tr class="module-item"><td><a class="enum" href="enum.SpanKind.html" title="opentelemetry::trace::SpanKind enum">SpanKind</a></td><td class="docblock-short"><p><code>SpanKind</code> describes the relationship between the Span, its parents,
and its children in a <code>Trace</code>. <code>SpanKind</code> describes two independent
properties that benefit tracing systems during analysis.</p>
</td></tr><tr class="module-item"><td><a class="enum" href="enum.StatusCode.html" title="opentelemetry::trace::StatusCode enum">StatusCode</a></td><td class="docblock-short"><p>The <code>StatusCode</code> interface represents the status of a finished <code>Span</code>.
It’s composed of a canonical code in conjunction with an optional
descriptive message.</p>
</td></tr><tr class="module-item"><td><a class="enum" href="enum.TraceError.html" title="opentelemetry::trace::TraceError enum">TraceError</a></td><td class="docblock-short"><p>Errors returned by the trace API.</p>
</td></tr></table><h2 id="constants" class="section-header"><a href="#constants">Constants</a></h2>
<table><tr class="module-item"><td><a class="constant" href="constant.TRACE_FLAG_DEBUG.html" title="opentelemetry::trace::TRACE_FLAG_DEBUG constant">TRACE_FLAG_DEBUG</a></td><td class="docblock-short"><p>TRACE_FLAGS_DEBUG is a bitmask with the debug bit set.</p>
</td></tr><tr class="module-item"><td><a class="constant" href="constant.TRACE_FLAG_DEFERRED.html" title="opentelemetry::trace::TRACE_FLAG_DEFERRED constant">TRACE_FLAG_DEFERRED</a></td><td class="docblock-short"><p>TRACE_FLAGS_DEFERRED is a bitmask with the deferred bit set. A SpanContext
with the deferred bit set means the sampling decision has been
defered to the receiver.</p>
</td></tr><tr class="module-item"><td><a class="constant" href="constant.TRACE_FLAG_NOT_SAMPLED.html" title="opentelemetry::trace::TRACE_FLAG_NOT_SAMPLED constant">TRACE_FLAG_NOT_SAMPLED</a></td><td class="docblock-short"><p>A SpanContext with TRACE_FLAG_NOT_SAMPLED means the span is not sampled.</p>
</td></tr><tr class="module-item"><td><a class="constant" href="constant.TRACE_FLAG_SAMPLED.html" title="opentelemetry::trace::TRACE_FLAG_SAMPLED constant">TRACE_FLAG_SAMPLED</a></td><td class="docblock-short"><p>TRACE_FLAG_SAMPLED is a bitmask with the sampled bit set. A SpanContext
with the sampling bit set means the span is sampled.</p>
</td></tr></table><h2 id="traits" class="section-header"><a href="#traits">Traits</a></h2>
<table><tr class="module-item"><td><a class="trait" href="trait.FutureExt.html" title="opentelemetry::trace::FutureExt trait">FutureExt</a></td><td class="docblock-short"><p>Extension trait allowing futures, streams, and sinks to be traced with a span.</p>
</td></tr><tr class="module-item"><td><a class="trait" href="trait.IdGenerator.html" title="opentelemetry::trace::IdGenerator trait">IdGenerator</a></td><td class="docblock-short"><p>Interface for generating IDs</p>
</td></tr><tr class="module-item"><td><a class="trait" href="trait.Span.html" title="opentelemetry::trace::Span trait">Span</a></td><td class="docblock-short"><p>Interface for a single operation within a trace.</p>
</td></tr><tr class="module-item"><td><a class="trait" href="trait.TraceContextExt.html" title="opentelemetry::trace::TraceContextExt trait">TraceContextExt</a></td><td class="docblock-short"><p>Methods for storing and retrieving trace data in a context.</p>
</td></tr><tr class="module-item"><td><a class="trait" href="trait.Tracer.html" title="opentelemetry::trace::Tracer trait">Tracer</a></td><td class="docblock-short"><p>Interface for constructing <code>Span</code>s.</p>
</td></tr><tr class="module-item"><td><a class="trait" href="trait.TracerProvider.html" title="opentelemetry::trace::TracerProvider trait">TracerProvider</a></td><td class="docblock-short"><p>An interface to create <code>Tracer</code> instances.</p>
</td></tr></table><h2 id="functions" class="section-header"><a href="#functions">Functions</a></h2>
<table><tr class="module-item"><td><a class="fn" href="fn.get_active_span.html" title="opentelemetry::trace::get_active_span fn">get_active_span</a></td><td class="docblock-short"><p>Executes a closure with a reference to this thread’s current span.</p>
</td></tr><tr class="module-item"><td><a class="fn" href="fn.mark_span_as_active.html" title="opentelemetry::trace::mark_span_as_active fn">mark_span_as_active</a></td><td class="docblock-short"><p>Mark a given <code>Span</code> as active.</p>
</td></tr></table><h2 id="types" class="section-header"><a href="#types">Type Definitions</a></h2>
<table><tr class="module-item"><td><a class="type" href="type.TraceResult.html" title="opentelemetry::trace::TraceResult type">TraceResult</a></td><td class="docblock-short"><p>Describe the result of operations in tracing API.</p>
</td></tr></table></section><section id="search" class="content hidden"></section><div id="rustdoc-vars" data-root-path="../../" data-current-crate="opentelemetry" data-search-index-js="../../search-index.js" data-search-js="../../search.js"></div>
    <script src="../../main.js"></script></body></html>