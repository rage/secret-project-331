<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="rctree is a “DOM-like” tree implemented using reference counting."><title>rctree - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-9ee3a5e31a2afa3e.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="rctree" data-themes="" data-resource-suffix="" data-rustdoc-version="1.75.0 (82e1608df 2023-12-21)" data-channel="1.75.0" data-search-js="search-8fbf244ebcf71464.js" data-settings-js="settings-74424d7eec62a23e.js" ><script src="../static.files/storage-fec3eaa3851e447d.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-9dd44ab47b99a0fb.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-5d8b3c7633ad77ba.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../rctree/index.html">rctree</a><span class="version">0.5.0</span></h2></div><div class="sidebar-elems"><ul class="block">
            <li><a id="all-types" href="all.html">All Items</a></li></ul><section><ul class="block"><li><a href="#modules">Modules</a></li><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Crate <a class="mod" href="#">rctree</a><button id="copy-path" title="Copy item path to clipboard"><img src="../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../src/rctree/lib.rs.html#1-781">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p><em>rctree</em> is a “DOM-like” tree implemented using reference counting.</p>
<p>“DOM-like” here means that data structures can be used to represent
the parsed content of an HTML or XML document,
like <a href="https://dom.spec.whatwg.org/"><em>the</em> DOM</a> does,
but don’t necessarily have the exact same API as the DOM.
That is:</p>
<ul>
<li>A tree is made up of nodes.</li>
<li>Each node has zero or more <em>child</em> nodes, which are ordered.</li>
<li>Each node has a no more than one <em>parent</em>, the node that it is a <em>child</em> of.</li>
<li>A node without a <em>parent</em> is called a <em>root</em>.</li>
<li>As a consequence, each node may also have <em>siblings</em>: its <em>parent</em>’s other <em>children</em>, if any.</li>
<li>From any given node, access to its
parent, previous sibling, next sibling, first child, and last child (if any)
can take no more than <em>O(1)</em> time.</li>
<li>Each node also has data associated to it,
which for the purpose of this project is purely generic.
For an HTML document, the data would be either the text of a text node,
or the name and attributes of an element node.</li>
<li>The tree is mutable:
nodes (with their sub-trees) can be inserted or removed anywhere in the tree.</li>
</ul>
<p>The lifetime of nodes is managed through <em>reference counting</em>.
To avoid reference cycles which would cause memory leaks, the tree is <em>asymmetric</em>:
each node holds optional <em>strong references</em> to its next sibling and first child,
but only optional <em>weak references</em> to its parent, previous sibling, and last child.</p>
<p>Nodes are destroyed as soon as there is no strong reference left to them.
The structure is such that holding a reference to the root
is sufficient to keep the entire tree alive.
However, if for example the only reference that exists from outside the tree
is one that you use to traverse it,
you will not be able to go back “up” the tree to ancestors and previous siblings after going “down”,
as those nodes will have been destroyed.</p>
<p>Weak references to destroyed nodes are treated as if they were not set at all.
(E.g. a node can become a root when its parent is destroyed.)</p>
<p>Since nodes are <em>aliased</em> (have multiple references to them),
<a href="http://doc.rust-lang.org/std/cell/index.html"><code>RefCell</code></a> is used for interior mutability.</p>
<p>Advantages:</p>
<ul>
<li>A single <code>Node</code> user-visible type to manipulate the tree, with methods.</li>
<li>Memory is freed as soon as it becomes unused (if parts of the tree are removed).</li>
</ul>
<p>Disadvantages:</p>
<ul>
<li>The tree can only be accessed from the thread is was created in.</li>
<li>Any tree manipulation, including read-only traversals,
requires incrementing and decrementing reference counts,
which causes run-time overhead.</li>
<li>Nodes are allocated individually, which may cause memory fragmentation and hurt performance.</li>
</ul>
</div></details><h2 id="modules" class="small-section-header"><a href="#modules">Modules</a></h2><ul class="item-table"><li><div class="item-name"><a class="mod" href="iterator/index.html" title="mod rctree::iterator">iterator</a></div><div class="desc docblock-short">Iterators prelude.</div></li></ul><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.Ancestors.html" title="struct rctree::Ancestors">Ancestors</a></div><div class="desc docblock-short">An iterator of nodes to the ancestors a given node.</div></li><li><div class="item-name"><a class="struct" href="struct.Children.html" title="struct rctree::Children">Children</a></div><div class="desc docblock-short">A double ended iterator of nodes to the children of a given node.</div></li><li><div class="item-name"><a class="struct" href="struct.Descendants.html" title="struct rctree::Descendants">Descendants</a></div><div class="desc docblock-short">An iterator of nodes to a given node and its descendants, in tree order.</div></li><li><div class="item-name"><a class="struct" href="struct.FollowingSiblings.html" title="struct rctree::FollowingSiblings">FollowingSiblings</a></div><div class="desc docblock-short">An iterator of nodes to the siblings after a given node.</div></li><li><div class="item-name"><a class="struct" href="struct.Node.html" title="struct rctree::Node">Node</a></div><div class="desc docblock-short">A reference to a node holding a value of type <code>T</code>. Nodes form a tree.</div></li><li><div class="item-name"><a class="struct" href="struct.PrecedingSiblings.html" title="struct rctree::PrecedingSiblings">PrecedingSiblings</a></div><div class="desc docblock-short">An iterator of nodes to the siblings before a given node.</div></li><li><div class="item-name"><a class="struct" href="struct.Traverse.html" title="struct rctree::Traverse">Traverse</a></div><div class="desc docblock-short">A double ended iterator of nodes to a given node and its descendants,
in tree order.</div></li><li><div class="item-name"><a class="struct" href="struct.WeakNode.html" title="struct rctree::WeakNode">WeakNode</a></div><div class="desc docblock-short">A weak reference to a node holding a value of type <code>T</code>.</div></li></ul><h2 id="enums" class="small-section-header"><a href="#enums">Enums</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.NodeEdge.html" title="enum rctree::NodeEdge">NodeEdge</a></div><div class="desc docblock-short">A node type during traverse.</div></li></ul></section></div></main></body></html>