{
  "db_name": "PostgreSQL",
  "query": "\nWITH cohort AS (\n  SELECT user_id,\n    DATE_TRUNC('week', created_at) AS cohort_week\n  FROM user_course_settings\n  WHERE current_course_id = $1\n    AND created_at >= NOW() - ($3 || ' months')::INTERVAL\n    AND deleted_at IS NULL\n)\nSELECT c.cohort_week,\n  DATE_TRUNC('week', s.created_at) AS \"period_start\",\n  COUNT(DISTINCT s.user_id) AS \"active_users!\"\nFROM cohort c\n  JOIN exercise_slide_submissions s ON c.user_id = s.user_id\n  AND s.course_id = $2\n  AND s.deleted_at IS NULL\nGROUP BY c.cohort_week,\n  \"period_start\"\nORDER BY c.cohort_week,\n  \"period_start\";\n        ",
  "describe": {
    "columns": [
      {
        "ordinal": 0,
        "name": "cohort_week",
        "type_info": "Timestamptz"
      },
      {
        "ordinal": 1,
        "name": "period_start",
        "type_info": "Timestamptz"
      },
      {
        "ordinal": 2,
        "name": "active_users!",
        "type_info": "Int8"
      }
    ],
    "parameters": {
      "Left": ["Uuid", "Uuid", "Text"]
    },
    "nullable": [null, null, null]
  },
  "hash": "a139eb73c9dc9bde6b30b5bc5ee646a1def5ac919980dcc7a7899c014aec396f"
}
