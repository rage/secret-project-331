<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Implements methods for directly executing `COPY FROM/TO STDOUT` on a `PgPool`."><title>PgPoolCopyExt in sqlx_postgres - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-492a78a4a87dcc01.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="sqlx_postgres" data-themes="" data-resource-suffix="" data-rustdoc-version="1.82.0 (f6e511eec 2024-10-15)" data-channel="1.82.0" data-search-js="search-a99f1315e7cc5121.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../static.files/storage-118b08c4c78b968e.js"></script><script defer src="sidebar-items.js"></script><script defer src="../static.files/main-921df33f47b8780c.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-3b12f09e550e0385.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../sqlx_postgres/index.html">sqlx_<wbr>postgres</a><span class="version">0.8.3</span></h2></div><h2 class="location"><a href="#">PgPool<wbr>Copy<wbr>Ext</a></h2><div class="sidebar-elems"><section><h3><a href="#required-methods">Required Methods</a></h3><ul class="block"><li><a href="#tymethod.copy_in_raw">copy_in_raw</a></li><li><a href="#tymethod.copy_out_raw">copy_out_raw</a></li></ul><h3><a href="#foreign-impls">Implementations on Foreign Types</a></h3><ul class="block"><li><a href="#impl-PgPoolCopyExt-for-Pool%3CPostgres%3E">Pool&#60;Postgres&#62;</a></li></ul><h3><a href="#implementors">Implementors</a></h3></section><h2><a href="index.html">In crate sqlx_<wbr>postgres</a></h2></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Trait <a href="index.html">sqlx_postgres</a>::<wbr><a class="trait" href="#">PgPoolCopyExt</a><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><span class="out-of-band"><a class="src" href="../src/sqlx_postgres/copy.rs.html#70-114">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><pre class="rust item-decl"><code>pub trait PgPoolCopyExt {
    // Required methods
    fn <a href="#tymethod.copy_in_raw" class="fn">copy_in_raw</a>&lt;'a&gt;(
        &amp;'a self,
        statement: &amp;'a <a class="primitive" href="https://doc.rust-lang.org/1.82.0/std/primitive.str.html">str</a>,
    ) -&gt; <a class="type" href="../futures_core/future/type.BoxFuture.html" title="type futures_core::future::BoxFuture">BoxFuture</a>&lt;'a, <a class="type" href="../sqlx_core/error/type.Result.html" title="type sqlx_core::error::Result">Result</a>&lt;<a class="struct" href="struct.PgCopyIn.html" title="struct sqlx_postgres::PgCopyIn">PgCopyIn</a>&lt;<a class="struct" href="../sqlx_core/pool/connection/struct.PoolConnection.html" title="struct sqlx_core::pool::connection::PoolConnection">PoolConnection</a>&lt;<a class="struct" href="struct.Postgres.html" title="struct sqlx_postgres::Postgres">Postgres</a>&gt;&gt;&gt;&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.copy_out_raw" class="fn">copy_out_raw</a>&lt;'a&gt;(
        &amp;'a self,
        statement: &amp;'a <a class="primitive" href="https://doc.rust-lang.org/1.82.0/std/primitive.str.html">str</a>,
    ) -&gt; <a class="type" href="../futures_core/future/type.BoxFuture.html" title="type futures_core::future::BoxFuture">BoxFuture</a>&lt;'a, <a class="type" href="../sqlx_core/error/type.Result.html" title="type sqlx_core::error::Result">Result</a>&lt;<a class="type" href="../futures_core/stream/type.BoxStream.html" title="type futures_core::stream::BoxStream">BoxStream</a>&lt;'static, <a class="type" href="../sqlx_core/error/type.Result.html" title="type sqlx_core::error::Result">Result</a>&lt;<a class="struct" href="../bytes/bytes/struct.Bytes.html" title="struct bytes::bytes::Bytes">Bytes</a>&gt;&gt;&gt;&gt;;
}</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Implements methods for directly executing <code>COPY FROM/TO STDOUT</code> on a <a href="type.PgPool.html" title="type sqlx_postgres::PgPool"><code>PgPool</code></a>.</p>
<p>This is a replacement for the inherent methods on <code>PgPool</code> which could not exist
once the Postgres driver was moved out into its own crate.</p>
</div></details><h2 id="required-methods" class="section-header">Required Methods<a href="#required-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="tymethod.copy_in_raw" class="method"><a class="src rightside" href="../src/sqlx_postgres/copy.rs.html#86-89">source</a><h4 class="code-header">fn <a href="#tymethod.copy_in_raw" class="fn">copy_in_raw</a>&lt;'a&gt;(
    &amp;'a self,
    statement: &amp;'a <a class="primitive" href="https://doc.rust-lang.org/1.82.0/std/primitive.str.html">str</a>,
) -&gt; <a class="type" href="../futures_core/future/type.BoxFuture.html" title="type futures_core::future::BoxFuture">BoxFuture</a>&lt;'a, <a class="type" href="../sqlx_core/error/type.Result.html" title="type sqlx_core::error::Result">Result</a>&lt;<a class="struct" href="struct.PgCopyIn.html" title="struct sqlx_postgres::PgCopyIn">PgCopyIn</a>&lt;<a class="struct" href="../sqlx_core/pool/connection/struct.PoolConnection.html" title="struct sqlx_core::pool::connection::PoolConnection">PoolConnection</a>&lt;<a class="struct" href="struct.Postgres.html" title="struct sqlx_postgres::Postgres">Postgres</a>&gt;&gt;&gt;&gt;</h4></section></summary><div class="docblock"><p>Issue a <code>COPY FROM STDIN</code> statement and begin streaming data to Postgres.
This is a more efficient way to import data into Postgres as compared to
<code>INSERT</code> but requires one of a few specific data formats (text/CSV/binary).</p>
<p>A single connection will be checked out for the duration.</p>
<p>If <code>statement</code> is anything other than a <code>COPY ... FROM STDIN ...</code> command, an error is
returned.</p>
<p>Command examples and accepted formats for <code>COPY</code> data are shown here:
<a href="https://www.postgresql.org/docs/current/sql-copy.html">https://www.postgresql.org/docs/current/sql-copy.html</a></p>
<h6 id="note"><a class="doc-anchor" href="#note">§</a>Note</h6>
<p><a href="struct.PgCopyIn.html#method.finish" title="method sqlx_postgres::PgCopyIn::finish">PgCopyIn::finish</a> or <a href="struct.PgCopyIn.html#method.abort" title="method sqlx_postgres::PgCopyIn::abort">PgCopyIn::abort</a> <em>must</em> be called when finished or the connection
will return an error the next time it is used.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.copy_out_raw" class="method"><a class="src rightside" href="../src/sqlx_postgres/copy.rs.html#110-113">source</a><h4 class="code-header">fn <a href="#tymethod.copy_out_raw" class="fn">copy_out_raw</a>&lt;'a&gt;(
    &amp;'a self,
    statement: &amp;'a <a class="primitive" href="https://doc.rust-lang.org/1.82.0/std/primitive.str.html">str</a>,
) -&gt; <a class="type" href="../futures_core/future/type.BoxFuture.html" title="type futures_core::future::BoxFuture">BoxFuture</a>&lt;'a, <a class="type" href="../sqlx_core/error/type.Result.html" title="type sqlx_core::error::Result">Result</a>&lt;<a class="type" href="../futures_core/stream/type.BoxStream.html" title="type futures_core::stream::BoxStream">BoxStream</a>&lt;'static, <a class="type" href="../sqlx_core/error/type.Result.html" title="type sqlx_core::error::Result">Result</a>&lt;<a class="struct" href="../bytes/bytes/struct.Bytes.html" title="struct bytes::bytes::Bytes">Bytes</a>&gt;&gt;&gt;&gt;</h4></section></summary><div class="docblock"><p>Issue a <code>COPY TO STDOUT</code> statement and begin streaming data
from Postgres. This is a more efficient way to export data from Postgres but
arrives in chunks of one of a few data formats (text/CSV/binary).</p>
<p>If <code>statement</code> is anything other than a <code>COPY ... TO STDOUT ...</code> command,
an error is returned.</p>
<p>Note that once this process has begun, unless you read the stream to completion,
it can only be canceled in two ways:</p>
<ol>
<li>by closing the connection, or:</li>
<li>by using another connection to kill the server process that is sending the data as shown
<a href="https://stackoverflow.com/a/35319598">in this StackOverflow answer</a>.</li>
</ol>
<p>If you don’t read the stream to completion, the next time the connection is used it will
need to read and discard all the remaining queued data, which could take some time.</p>
<p>Command examples and accepted formats for <code>COPY</code> data are shown here:
<a href="https://www.postgresql.org/docs/current/sql-copy.html">https://www.postgresql.org/docs/current/sql-copy.html</a></p>
</div></details></div><h2 id="foreign-impls" class="section-header">Implementations on Foreign Types<a href="#foreign-impls" class="anchor">§</a></h2><details class="toggle implementors-toggle"><summary><section id="impl-PgPoolCopyExt-for-Pool%3CPostgres%3E" class="impl"><a class="src rightside" href="../src/sqlx_postgres/copy.rs.html#116-130">source</a><a href="#impl-PgPoolCopyExt-for-Pool%3CPostgres%3E" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="trait.PgPoolCopyExt.html" title="trait sqlx_postgres::PgPoolCopyExt">PgPoolCopyExt</a> for <a class="struct" href="../sqlx_core/pool/struct.Pool.html" title="struct sqlx_core::pool::Pool">Pool</a>&lt;<a class="struct" href="struct.Postgres.html" title="struct sqlx_postgres::Postgres">Postgres</a>&gt;</h3></section></summary><div class="impl-items"><section id="method.copy_in_raw" class="method trait-impl"><a class="src rightside" href="../src/sqlx_postgres/copy.rs.html#117-122">source</a><a href="#method.copy_in_raw" class="anchor">§</a><h4 class="code-header">fn <a href="#tymethod.copy_in_raw" class="fn">copy_in_raw</a>&lt;'a&gt;(
    &amp;'a self,
    statement: &amp;'a <a class="primitive" href="https://doc.rust-lang.org/1.82.0/std/primitive.str.html">str</a>,
) -&gt; <a class="type" href="../futures_core/future/type.BoxFuture.html" title="type futures_core::future::BoxFuture">BoxFuture</a>&lt;'a, <a class="type" href="../sqlx_core/error/type.Result.html" title="type sqlx_core::error::Result">Result</a>&lt;<a class="struct" href="struct.PgCopyIn.html" title="struct sqlx_postgres::PgCopyIn">PgCopyIn</a>&lt;<a class="struct" href="../sqlx_core/pool/connection/struct.PoolConnection.html" title="struct sqlx_core::pool::connection::PoolConnection">PoolConnection</a>&lt;<a class="struct" href="struct.Postgres.html" title="struct sqlx_postgres::Postgres">Postgres</a>&gt;&gt;&gt;&gt;</h4></section><section id="method.copy_out_raw" class="method trait-impl"><a class="src rightside" href="../src/sqlx_postgres/copy.rs.html#124-129">source</a><a href="#method.copy_out_raw" class="anchor">§</a><h4 class="code-header">fn <a href="#tymethod.copy_out_raw" class="fn">copy_out_raw</a>&lt;'a&gt;(
    &amp;'a self,
    statement: &amp;'a <a class="primitive" href="https://doc.rust-lang.org/1.82.0/std/primitive.str.html">str</a>,
) -&gt; <a class="type" href="../futures_core/future/type.BoxFuture.html" title="type futures_core::future::BoxFuture">BoxFuture</a>&lt;'a, <a class="type" href="../sqlx_core/error/type.Result.html" title="type sqlx_core::error::Result">Result</a>&lt;<a class="type" href="../futures_core/stream/type.BoxStream.html" title="type futures_core::stream::BoxStream">BoxStream</a>&lt;'static, <a class="type" href="../sqlx_core/error/type.Result.html" title="type sqlx_core::error::Result">Result</a>&lt;<a class="struct" href="../bytes/bytes/struct.Bytes.html" title="struct bytes::bytes::Bytes">Bytes</a>&gt;&gt;&gt;&gt;</h4></section></div></details><h2 id="implementors" class="section-header">Implementors<a href="#implementors" class="anchor">§</a></h2><div id="implementors-list"></div><script src="../trait.impl/sqlx_postgres/copy/trait.PgPoolCopyExt.js" data-ignore-extern-crates="sqlx_core" async></script></section></div></main></body></html>